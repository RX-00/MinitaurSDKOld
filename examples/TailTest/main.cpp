
#include <stdio.h>
#include <SDK.h>
#include <math.h>
#include <Motor.h>
#include <ReorientableBehavior.h>
#include "Interpolator.h"

#if defined(ROBOT_MINITAUR)
// Subject to change for individual robots
// const float motZeros[8] = {2.82, 3.435, 3.54, 3.076, 1.03, 3.08, 6.190, 1.493};
// const float motZeros[8] = {2.570, 2.036, 3.777, 3.853, 2.183, 1.556, .675, 2.679}; // RML Ellie
const float motZeros[8] = {1.010, 2.036, 3.777, 3.853, 2.183, 1.556, .675, 1.010}; // RML Ellie With Tail
// const float motZeros[8] = {0.631, 4.076, 1.852, 3.414, 1.817, 5.500, 1.078, 6.252}; //RML Odie
// const float motZeros[9] = {1.010, 4.076, 1.852, 3.414, 1.817, 5.500, 1.078, 6.252, 1.010}; //RML Odie with Tail
// const float motZeros[1] = {1.010}; //RML Odie with just Tail

#endif


#define TIMESTEPS 81
#define MOTORS 8
#define TAIL_MOT 0

char myData[32];
float* myData_buf = (float*)myData;

enum TBMode
{
	TB_SIT = 0,
	TB_STAND,
};

// No Offset
float times[TIMESTEPS] = {0.000000,0.001952,0.003904,0.005856,0.007809,0.009761,0.011713,0.013665,0.015617,0.017569,0.019521,0.021473,0.023426,0.025378,0.027330,0.029282,0.031234,0.033186,0.035138,0.037090,0.039043,0.040995,0.042947,0.044899,0.046851,0.048803,0.050755,0.052707,0.054660,0.056612,0.058564,0.060516,0.062468,0.064420,0.066372,0.068324,0.070277,0.072229,0.074181,0.076133,0.078085,0.080037,0.081989,0.083941,0.085893,0.087846,0.089798,0.091750,0.093702,0.095654,0.097606,0.099558,0.101511,0.103463,0.105415,0.107367,0.109319,0.111271,0.113223,0.115175,0.117128,0.119080,0.121032,0.122984,0.124936,0.126888,0.128840,0.130792,0.132744,0.134697,0.136649,0.138601,0.140553,0.142505,0.144457,0.146409,0.148362,0.150314,0.152266,0.154218,0.156170};
float pos[TIMESTEPS][MOTORS] = {{-0.607933,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.606081,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.602864,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.598097,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.592645,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.587078,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.581482,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.576169,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.570701,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.565474,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.560103,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.555011,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.549826,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.544979,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.540093,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.535584,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.531074,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.526995,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.522966,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.519394,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.515883,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.512836,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.509853,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.507334,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.504879,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.502888,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.500959,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.499489,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.498070,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.497093,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.496148,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.495529,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.494929,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.494739,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.494544,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.494669,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.494851,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.495834,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.497376,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.499916,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.503015,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.506994,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.511286,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.516022,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.520660,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.525340,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.530231,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.534926,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.539802,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.544419,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.549153,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.553592,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.558122,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.562323,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.566590,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.570525,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.574525,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.578187,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.581897,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.585239,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.588597,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.591561,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.594521,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.597073,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.599612,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.601729,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.603829,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.605527,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.607231,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.608544,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.609868,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.610803,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.611748,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.612306,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.612873,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.613044,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.613210,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.612934,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.612662,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.612260,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.611842,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
float vel[TIMESTEPS][MOTORS] = {{0.475190,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.347655,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.078211,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.698461,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.985720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.878095,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.809866,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.787291,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.764158,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.742263,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.707442,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.660284,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.598257,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.519910,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.432988,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.338256,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.228751,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.102848,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.973505,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.839852,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.705568,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.570100,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.434898,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.299537,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.164560,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.029244,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.896214,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.764543,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.638294,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.517366,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.400044,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.285857,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.176493,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.071150,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.022986,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.078964,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.287059,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.670492,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.064349,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.478739,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.841374,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.164025,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.365974,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.431138,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.469737,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.477893,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.480525,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.480018,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.461296,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.421999,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.376228,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.323947,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.263784,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.194563,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.126096,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.058615,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.988075,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.915156,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.833469,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.742776,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.646323,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.543103,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.437750,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.330136,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.219542,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.104537,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.996720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.896619,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.798122,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.701052,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.604222,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.507230,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.410467,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.314040,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.214788,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.113307,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.003810,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.123670,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.197794,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.211706,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.215078,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
float dfVec[TIMESTEPS][MOTORS] = {{0.625717,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.890837,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.953302,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.141780,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.855497,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.822792,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.845971,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.839110,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.831153,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.824500,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.799558,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.785228,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.749392,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.725584,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.689251,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.660464,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.610767,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.572508,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.529060,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.488446,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.446656,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.405491,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.364435,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.323302,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.282455,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.241336,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.203223,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.163212,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.130688,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.093941,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.062099,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.027401,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.000205,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.032216,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.048473,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.065483,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.299217,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.415732,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.546870,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.672793,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.725084,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.823129,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.748741,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.768543,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.750163,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.752641,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.747398,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.747244,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.720814,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.708873,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.687404,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.671517,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.644547,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.623512,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.603267,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.582761,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.557609,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.535451,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.500959,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.473400,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.437354,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.405988,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.371314,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.338613,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.301851,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.266904,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.241955,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.211537,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.183158,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.153661,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.124264,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.094790,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.065407,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.036105,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.002544,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.028293,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.070341,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.109079,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.071939,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.076167,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.065357,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
float u[TIMESTEPS][MOTORS] = {{2.974223,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.974223,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.988430,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.988430,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.320004,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.320004,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.048662,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.048662,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.054395,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.054395,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.143132,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.143132,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.248106,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.248106,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.309404,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.309404,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.410881,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.410881,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.436491,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.436491,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.442575,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.442575,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.442399,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.442399,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.441356,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.441356,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.427071,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.427071,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.390984,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.390984,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.367446,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.367446,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.332675,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.332675,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.256367,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.256367,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.309934,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.309934,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.380720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.380720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.022911,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.022911,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.184040,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.184040,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.002015,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.002015,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.039361,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.039361,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.167519,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.167519,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.214238,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.214238,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.267926,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.267926,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.264465,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.264465,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.287431,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.287431,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.347184,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.347184,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.388810,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.388810,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.405246,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.405246,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.424744,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.424744,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.376458,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.376458,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366868,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366868,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366705,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366705,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366579,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366579,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.387595,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.387595,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.441816,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.441816,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.073131,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.073131,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};

// Back Offset
// float times[TIMESTEPS] = {0.000000,0.002234,0.004468,0.006701,0.008935,0.011169,0.013403,0.015636,0.017870,0.020104,0.022338,0.024571,0.026805,0.029039,0.031273,0.033506,0.035740,0.037974,0.040208,0.042441,0.044675,0.046909,0.049142,0.051376,0.053610,0.055844,0.058078,0.060311,0.062545,0.064779,0.067013,0.069246,0.071480,0.073714,0.075948,0.078181,0.080415,0.082649,0.084883,0.087116,0.089350,0.091584,0.093817,0.096051,0.098285,0.100519,0.102753,0.104986,0.107220,0.109454,0.111688,0.113921,0.116155,0.118389,0.120622,0.122856,0.125090,0.127324,0.129557,0.131791,0.134025,0.136259,0.138492,0.140726,0.142960,0.145194,0.147427,0.149661,0.151895,0.154129,0.156362,0.158596,0.160830,0.163064,0.165297,0.167531,0.169765,0.171999,0.174232,0.176466,0.178700};
// float pos[TIMESTEPS][MOTORS] = {{-0.923081,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.920792,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.918124,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.913929,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.908298,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.902179,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.895902,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.889830,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.883854,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.878393,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.873291,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.869100,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.865633,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.863465,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.862413,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.862870,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.864408,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.867394,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.871279,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.876205,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.881538,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.887396,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.893241,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.899104,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.905045,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.910591,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.916002,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.920746,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.925147,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.928802,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.932147,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.934887,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.937497,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.939679,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.941902,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.944079,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.946161,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.948364,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.950660,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.953897,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.957940,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.963251,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.969205,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.975490,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.982008,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.988334,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.994766,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.000990,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.007301,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.013315,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.019262,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.024573,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.029449,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.033330,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.036409,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.038058,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.038489,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.037090,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.034353,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.030311,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.025598,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.020218,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.014752,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.008901,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.003098,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.997100,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.991193,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.985190,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.979297,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.973257,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.967386,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.961663,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.956013,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.951005,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.946313,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.942283,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.938492,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.935296,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.932241,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.929554,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.926851,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
// float vel[TIMESTEPS][MOTORS] = {{1.149198,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.010483,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.341804,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.295614,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.805418,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.800874,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.773377,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.732950,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.608754,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.399619,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.113062,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.753777,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.288331,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.698309,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.112322,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.473382,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.032399,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.578734,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.013726,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.336555,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.552030,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.651915,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.692744,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.672641,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.602920,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.484493,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.309782,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.069130,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.828958,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.582257,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.376966,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.213388,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.088401,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.000311,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.960096,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.974291,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.996946,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.994466,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.201210,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.652503,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.100285,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.577723,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.851750,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.893346,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.903914,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.877970,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.852733,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.833064,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.783754,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.713970,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.558371,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-2.315594,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.994023,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.596908,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.100423,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.498269,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.166408,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.929012,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.542396,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.007375,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.318429,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.454964,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.560869,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.636220,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.680049,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.688010,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.690025,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.684182,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.683328,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.696317,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.660633,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.579786,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.428042,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.190486,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.970993,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.769673,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.585331,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.412517,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.289127,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.222711,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.160334,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
// float dfVec[TIMESTEPS][MOTORS] = {{0.326591,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.284439,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.846123,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.135961,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.855296,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.853915,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.822923,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.810638,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.690616,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.627065,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.463945,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.354768,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.109138,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.070154,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.244267,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.422247,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.565876,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.731893,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.754747,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.852846,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.812878,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.843230,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.797552,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.791443,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.721430,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.685443,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.576995,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.503867,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.431219,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.356253,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.334371,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.284663,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.284437,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.257669,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.292316,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.296630,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.311725,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.310971,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.578920,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.716057,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.848568,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.993650,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.877258,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.889898,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.862519,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.854636,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.847503,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.841526,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.797316,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.776111,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.644510,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.570736,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.395604,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.274931,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.026492,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.156487,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.419852,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.651587,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.691613,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.832909,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.776392,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.817881,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.819935,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.842832,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.825138,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.827557,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.822237,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.820462,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.824994,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.828941,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.770256,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.745688,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.629940,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.557753,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.508689,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.447513,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.408089,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.355575,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.366519,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.346337,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.331314,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};
// float u[TIMESTEPS][MOTORS] = {{-0.139780,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.139780,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.708909,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.708909,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.017315,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.017315,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.122565,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.122565,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.631014,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.631014,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.100905,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.100905,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.744743,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.744743,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.720314,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.720314,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.558156,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.558156,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.882580,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.882580,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.230995,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.230995,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.127935,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.127935,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.429650,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.429650,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.771720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.771720,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.769657,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.769657,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.519394,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.519394,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.286101,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.286101,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.003510,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.003510,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.054245,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.054245,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.321779,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.321779,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.299797,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-1.299797,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.066028,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.066028,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.123000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.123000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.119686,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.119686,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.300282,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.300282,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.821312,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.821312,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.299684,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.299684,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.902600,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.902600,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.281926,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{2.281926,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.377489,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{1.377489,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.444179,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.444179,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.258005,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.258005,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.066370,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.066370,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.029713,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.029713,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.059324,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{0.059324,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.236308,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.236308,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.666618,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.666618,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.557649,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.557649,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.455117,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.455117,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.155802,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.155802,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000},{-0.131506,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000}};

class TrajBound : public ReorientableBehavior
{
public:	

	Interpolator interp;

	TBMode mode = TB_SIT; //Current state within state-machine

	uint32_t tLast; //int used to store system time at various events

	float extDes;				 //The desired leg extension
	float angDes;				 // The desired leg angle
	float t;
	float test1;
	float test2;

	bool boolSlow = false;

	float posDes[MOTORS];
	float velDes[MOTORS];
	float accDes[MOTORS];
	float uDes[MOTORS];
	float df[MOTORS];
	float uPos[MOTORS];
	float uVel[MOTORS];
	float posAct;
	float velAct;
	float kp = 1;
	float kd = 0.025; // 0.02
	float kpt = 5;
	float kdt = 0.05; // 0.02
	float kpy = 0.1;//0.1;
	float kdy = 0;//0.05;
	float kiy = 0.02;
	float V = 15;
	float Ra = 0.22;
	float kt = 0.0954;
	float yawErrorInt = 0;

	float yawInit;
	float yawDes;
	float turnLeft;

	float finalTime = times[TIMESTEPS-1];


	//sig is mapped from remote; here, 3 corresponds to pushing the left stick to the right
	// which in turn forces the state machine into FH_LEAP
	void signal(uint32_t sig)
	{
		if(sig > 1)
		{
			tLast = S->millis;
		}
			
	}

	void begin()
	{
		mode = TB_STAND;			// Start behavior in STAND mode
		tLast = S->millis;		// Record the system time @ this transition
		yawInit = S->imu.euler.z;
		yawErrorInt = 0;
	}

	void update()
	{
		// if (isReorienting())
		// 	return;
		C->mode = RobotCommand_Mode_JOINT;

		for (int j = 0; j < P->joints_count; j++)
	    {
	    	posDes[j] = 0;
	    	velDes[j] = 0;
	    	uDes[j] = 0;
	    	df[j] = 0;
	    }

		
		
		if (mode == TB_SIT)
		{
			for (int i = 0; i < P->joints_count; i++)
			{
				posDes[i] = 0.5;
				// Splay angle for the front/rear legs (outward splay due to fore-displacement of front legs
				// and aft-displacement of rear legs)
				// The pitch angle (S->imu.euler.y) is subtracted since we want to the set the *absolute* leg angle
				// and limb[i].setPosition(ANGLE, *) will set the angle of the leg *relative* to the robot body
				
				if (i == TAIL_MOT)
				{
					posDes[i] = 0;
					joint[i].setGain(0.8, .003);
					joint[i].setPosition(posDes[i]);
				} else {
					if(i==1 || i==3 || i==4 || i==6)
					{
						posDes[i] = posDes[i] - S->imu.euler.y;
					}else if(i==0 || i==2 || i==5 || i==7)
					{
						posDes[i] = posDes[i] + S->imu.euler.y;
					}

					joint[i].setGain(0, 0);
					joint[i].setPosition(posDes[i]); 
				}

				
			}
		}
		else if (mode == TB_STAND)
		{
			t = 0.00001*(100*(S->millis - tLast) % (int)(100000*finalTime));

   		    interp.getMultipleCubicSplineInterp(pos,vel,times,t,posDes);
   		    interp.getMultipleLinearInterp(vel,times,t,velDes);
   		    interp.getMultipleZOH(dfVec,times,t,df);
   		    // interp.getMultipleZOH(u,times,t,accDes);

			for (int i = 0; i < P->joints_count; i++)
			{
				yawDes = yawInit + 0;
				yawErrorInt = yawErrorInt + 0.001*(yawDes - S->imu.euler.z);
				// turnLeft = kpy*(yawDes - S->imu.euler.z) + kdy*(-S->imu.angular_velocity.z) + 0.1;
				turnLeft = -map(C->behavior.twist.angular.z, -1.0, 1.0, -0.1, 0.1) + 0.03;

				if((i==0 || i==2 || i==4 || i==6) && (i != TAIL_MOT))
				{
					posDes[i] = posDes[i] - turnLeft;
				} else if((i==1 || i==3 || i==5 || i==7) && (i != TAIL_MOT))
				{
					posDes[i] = posDes[i] + turnLeft;
				}

				posAct = joint[i].getPosition();
				velAct = joint[i].getVelocity();

				uPos[i] = kpt*(posDes[i] - posAct);
				uVel[i] = kdt*(velDes[i] - velAct);


				// uDes[i] = accDes[i]*0.5*0.5*0.4/(45*0.7);
				// df[i] = 1/(0.95*V)*(uDes[i]*Ra/kt + kt*joint[i].getVelocity());

				if (i == TAIL_MOT)
				{
					// df[i] = 1/(0.95*V)*(uDes[i]*Ra/kt + kt*45*joint[i].getVelocity());
					joint[i].setOpenLoop(df[i] + uPos[i] + uVel[i]);

				} else {
					// joint[i].setOpenLoop(df[i] + kp*(posDes[i] - posAct) + kd*(velDes[i] - velAct));
					joint[i].setOpenLoop(0.0);
				}
				
			}
		}
	}

	bool running()
	{
		return false;
	}
	void end()
	{
		mode = TB_SIT;
	}
};

TrajBound trajBound;

void debug()
{
	// printf("%d, ", trajBound.mode);
	// printf("Time: %4.3fs. ", trajBound.t);
	printf("pos command: ");
	for (int i = 0; i < P->joints_count; i++)
	{
		printf("%4.3f, ", joint[i].getPosition());
		printf("%4.3f, ", joint[i].getOpenLoop());
	}

	// printf("Pos: %4.3f, ", joint[TAIL_MOT].getPosition());
	// printf("Open Loop: %4.3f, ",joint[TAIL_MOT].getOpenLoop());
	
	// printf("%4.3f, %4.3f, %4.3f ", trajBound.yawInit,trajBound.turnLeft, trajBound.kiy*trajBound.yawErrorInt);
	printf("\n");

	myData_buf[0] = joint[TAIL_MOT].getPosition();
	myData_buf[1] = trajBound.t;
	myData_buf[2] = trajBound.uPos[TAIL_MOT];
	myData_buf[3] = trajBound.uVel[TAIL_MOT];
	myData_buf[4] = trajBound.df[TAIL_MOT];
	// myData_buf[5] = trajBound.uDes[TAIL_MOT];
	myData_buf[5] = joint[TAIL_MOT].getOpenLoop();
	
	write(LOGGER_FILENO, myData, 32);
}

int main(int argc, char *argv[])
{
#if defined(ROBOT_MINITAUR)
	init(RobotParams_Type_MINITAUR, argc, argv);

		// Set the joint type; see JointParams
	P->joints[TAIL_MOT].type = JointParams_Type_GRBL;

	// Set the *physical* address (e.g. etherCAT ID, PWM port, dynamixel ID, etc.)
	P->joints[TAIL_MOT].address = 9;

	// If there is a gearbox the joint electronics doesn't know about, this could be > 1.
	// Do not set to 0.
	P->joints[TAIL_MOT].gearRatio = 45.39;

	// Configure joints
	P->joints_count = S->joints_count = C->joints_count = MOTORS;
	for (int i = 0; i < P->joints_count; i++)
	{
		// Set zeros and directions
		P->joints[i].zero = motZeros[i]; //Add motor zeros from array at beginning of file
	}
	P->joints[TAIL_MOT].direction = 1;
		
#elif defined(ROBOT_MINITAUR_E)
	init(RobotParams_Type_MINITAUR_E, argc, argv);
	JoyType joyType = JoyType_FRSKY_XSR;
	ioctl(JOYSTICK_FILENO, IOCTL_CMD_JOYSTICK_SET_TYPE, &joyType);
#else
#error "Define robot type in preprocessor"
#endif


	// Uncomment to clear Bound and Walk behaviors
	behaviors.clear();
	
	behaviors.push_back(&trajBound);

	setDebugRate(100);
	softStartEnable(false);

	SerialPortConfig cfg;
	cfg.baud = 115200;
	cfg.mode = SERIAL_8N1;
	ioctl(STDOUT_FILENO, IOCTL_CMD_SERIAL_PORT_CFG, &cfg);


	// Run
	return begin();
}
