
#include <stdio.h>
#include <SDK.h>
#include <math.h>
#include <Motor.h>
#include <ReorientableBehavior.h>
#include "Interpolator.h"

#if defined(ROBOT_MINITAUR)
// Subject to change for individual robots
// const float motZeros[8] = {2.82, 3.435, 3.54, 3.076, 1.03, 3.08, 6.190, 1.493};
const float motZeros[8] = {0.93, 5.712, 3.777, 3.853, 2.183, 1.556, .675, 2.679}; // RML Ellie
// const float motZeros[8] = {0.631, 4.076, 1.852, 3.414, 1.817, 5.500, 1.078, 6.252}; //RML Odie
#endif

#define TIMESTEPS 84
#define MOTORS 8

enum TBMode
{
	TB_SIT = 0,
	TB_STAND,
};

char myData[32];
float* myData_buf = (float*)myData;

// globals for power monitoring values
float voltage, current;

#pragma pack(push, 1)
// We receive the serial protocol version number (in case we add more fields later)
// our behaviorCmd, and a checksum.
struct SerialCommandPacket
{
	float voltage, current;
};

const char ALIGNMENT_WORD[2] = {'G', 'R'};

#pragma pack(pop)

// OG Bound, works
// float pos[TIMESTEPS][MOTORS] = {{0.456580, 0.215020, 0.837780, 1.625513, 0.215119, 0.456482, 1.625524, 0.837784},
// 																{0.458896, 0.215851, 0.839891, 1.628079, 0.215932, 0.458864, 1.628090, 0.839896},
// 																{0.461286, 0.216499, 0.842176, 1.630833, 0.216598, 0.461188, 1.630845, 0.842180},
// 																{0.463604, 0.217333, 0.844284, 1.633389, 0.217413, 0.463572, 1.633401, 0.844289},
// 																{0.465998, 0.217985, 0.846568, 1.636134, 0.218084, 0.465900, 1.636146, 0.846572},
// 																{0.468319, 0.218823, 0.848676, 1.638681, 0.218903, 0.468287, 1.638692, 0.848680},
// 																{0.470714, 0.219479, 0.850959, 1.641416, 0.219578, 0.470616, 1.641428, 0.850963},
// 																{0.473039, 0.220321, 0.853065, 1.643954, 0.220401, 0.473006, 1.643965, 0.853069},
// 																{0.475434, 0.220981, 0.855346, 1.646680, 0.221080, 0.475335, 1.646691, 0.855350},
// 																{0.477762, 0.221826, 0.857451, 1.649208, 0.221906, 0.477729, 1.649219, 0.857455},
// 																{0.480158, 0.222490, 0.859731, 1.651924, 0.222589, 0.480059, 1.651936, 0.859735},
// 																{0.482490, 0.223339, 0.861834, 1.654443, 0.223419, 0.482457, 1.654454, 0.861839},
// 																{0.484886, 0.224006, 0.864113, 1.657151, 0.224106, 0.484787, 1.657162, 0.864117},
// 																{0.487221, 0.224860, 0.866215, 1.659660, 0.224940, 0.487188, 1.659671, 0.866220},
// 																{0.489618, 0.225531, 0.868492, 1.662358, 0.225630, 0.489519, 1.662370, 0.868496},
// 																{0.491957, 0.226387, 0.870592, 1.664859, 0.226467, 0.491924, 1.664870, 0.870597},
// 																{0.494354, 0.227062, 0.872869, 1.667548, 0.227161, 0.494255, 1.667559, 0.872873},
// 																{0.496696, 0.227923, 0.874968, 1.670039, 0.228003, 0.496663, 1.670051, 0.874973},
// 																{0.499093, 0.228601, 0.877242, 1.672719, 0.228700, 0.498994, 1.672731, 0.877246},
// 																{0.501439, 0.229465, 0.879340, 1.675201, 0.229546, 0.501405, 1.675213, 0.879345},
// 																{0.503836, 0.230147, 0.881613, 1.677873, 0.230247, 0.503737, 1.677884, 0.881617},
// 																{0.503736, 0.230047, 0.881513, 1.677773, 0.230147, 0.503836, 1.677784, 0.881517},
// 																{0.433257, 0.208666, 0.917353, 1.732804, 0.208696, 0.433344, 1.732815, 0.917356},
// 																{0.383392, 0.216608, 0.946268, 1.760331, 0.216568, 0.383465, 1.760342, 0.946271},
// 																{0.350902, 0.249098, 0.970632, 1.768031, 0.249059, 0.350941, 1.768042, 0.970583},
// 																{0.334258, 0.303670, 0.990909, 1.759397, 0.303631, 0.334264, 1.759407, 0.990912},
// 																{0.334625, 0.381893, 1.007433, 1.736623, 0.381854, 0.334631, 1.736633, 1.007434},
// 																{0.351061, 0.481579, 1.020068, 1.701112, 0.481540, 0.351067, 1.701122, 1.020070},
// 																{0.380882, 0.599637, 1.029728, 1.655103, 0.599599, 0.380888, 1.655007, 1.029731},
// 																{0.420566, 0.729634, 1.036853, 1.600236, 0.729596, 0.420571, 1.600244, 1.036858},
// 																{0.465293, 0.865162, 1.042909, 1.538116, 0.865125, 0.465297, 1.538124, 1.042914},
// 																{0.511940, 1.000374, 1.048554, 1.470629, 1.000337, 0.511944, 1.470637, 1.048559},
// 																{0.557279, 1.131156, 1.055333, 1.398920, 1.131119, 0.557283, 1.398928, 1.055337},
// 																{0.600386, 1.255854, 1.063832, 1.325112, 1.255818, 0.600389, 1.325120, 1.063836},
// 																{0.640101, 1.373141, 1.075086, 1.250646, 1.373105, 0.640104, 1.250653, 1.075090},
// 																{0.676737, 1.483559, 1.089677, 1.177967, 1.483523, 0.676739, 1.177974, 1.089680},
// 																{0.709999, 1.587140, 1.107351, 1.108953, 1.587104, 0.710001, 1.108985, 1.107354},
// 																{0.740571, 1.684942, 1.128191, 1.045846, 1.684906, 0.740573, 1.045853, 1.128193},
// 																{0.768396, 1.777287, 1.151433, 0.990034, 1.777252, 0.768398, 0.990041, 1.151449},
// 																{0.794181, 1.865205, 1.176224, 0.942517, 1.865170, 0.794182, 0.942523, 1.176226},
// 																{0.818101, 1.948981, 1.201952, 0.904425, 1.948946, 0.818102, 0.904432, 1.201953},
// 																{0.839927, 2.029193, 1.228159, 0.876733, 2.029158, 0.839928, 0.876739, 1.228160},
// 																{0.840027, 2.029093, 1.228259, 0.876633, 2.029058, 0.840028, 0.876639, 1.228159},
// 																{0.840784, 2.031811, 1.229372, 0.875867, 2.031776, 0.840785, 0.875869, 1.229293},
// 																{0.841390, 2.034711, 1.230358, 0.875010, 2.034676, 0.841391, 0.875016, 1.230258},
// 																{0.841986, 2.037422, 1.231345, 0.874240, 2.037388, 0.841987, 0.874243, 1.231305},
// 																{0.842753, 2.040316, 1.232460, 0.873394, 2.040281, 0.842754, 0.873400, 1.232360},
// 																{0.843348, 2.043020, 1.233450, 0.872627, 2.042985, 0.843349, 0.872630, 1.233409},
// 																{0.844114, 2.045907, 1.234566, 0.871784, 2.045872, 0.844115, 0.871791, 1.234466},
// 																{0.844709, 2.048604, 1.235558, 0.871021, 2.048570, 0.844710, 0.871024, 1.235518},
// 																{0.845474, 2.051485, 1.236676, 0.870181, 2.051450, 0.845475, 0.870188, 1.236576},
// 																{0.846069, 2.054176, 1.237669, 0.869422, 2.054142, 0.846069, 0.869424, 1.237629},
// 																{0.846834, 2.057050, 1.238789, 0.868585, 2.057016, 0.846834, 0.868592, 1.238689},
// 																{0.847427, 2.059735, 1.239784, 0.867829, 2.059701, 0.847428, 0.867832, 1.239745},
// 																{0.848192, 2.062603, 1.240905, 0.866996, 2.062568, 0.848193, 0.867002, 1.240805},
// 																{0.848785, 2.065281, 1.241903, 0.866243, 2.065247, 0.848786, 0.866246, 1.241863},
// 																{0.849549, 2.068142, 1.243025, 0.865413, 2.068107, 0.849550, 0.865419, 1.242925},
// 																{0.850142, 2.070814, 1.244025, 0.864664, 2.070780, 0.850143, 0.864667, 1.243985},
// 																{0.850905, 2.073668, 1.245148, 0.863837, 2.073634, 0.850906, 0.863844, 1.245048},
// 																{0.851498, 2.076334, 1.246150, 0.863092, 2.076300, 0.851498, 0.863095, 1.246111},
// 																{0.852260, 2.079182, 1.247274, 0.862268, 2.079147, 0.852261, 0.862274, 1.247174},
// 																{0.852852, 2.081841, 1.248277, 0.861527, 2.081807, 0.852853, 0.861529, 1.248236},
// 																{0.853614, 2.084683, 1.249404, 0.860706, 2.084648, 0.853615, 0.860712, 1.249304},
// 																{0.853514, 2.084583, 1.249304, 0.860606, 2.084548, 0.853515, 0.860612, 1.249286},
// 																{0.865081, 2.146565, 1.125639, 0.814393, 2.146531, 0.865082, 0.814400, 1.125622},
// 																{0.858847, 2.170244, 0.998816, 0.761381, 2.170211, 0.858848, 0.761388, 0.998799},
// 																{0.838996, 2.164239, 0.867548, 0.700631, 2.164206, 0.838997, 0.700639, 0.867531},
// 																{0.807450, 2.131612, 0.733574, 0.632462, 2.131580, 0.807451, 0.632470, 0.733557},
// 																{0.765781, 2.073027, 0.599712, 0.559885, 2.073047, 0.765781, 0.559893, 0.599696},
// 																{0.715068, 1.989149, 0.472533, 0.489464, 1.989117, 0.715067, 0.489473, 0.472518},
// 																{0.657371, 1.880361, 0.359828, 0.431822, 1.880330, 0.657414, 0.431832, 0.359813},
// 																{0.594249, 1.748407, 0.269255, 0.397188, 1.748376, 0.594246, 0.397198, 0.269240},
// 																{0.527285, 1.593922, 0.205683, 0.394319, 1.593892, 0.527237, 0.394331, 0.205669},
// 																{0.460485, 1.422441, 0.171886, 0.428114, 1.422412, 0.460388, 0.428128, 0.171872},
// 																{0.399695, 1.243221, 0.170355, 0.502165, 1.243192, 0.399599, 0.502179, 0.170343},
// 																{0.349491, 1.063851, 0.200114, 0.611814, 1.063823, 0.349392, 0.611827, 0.200102},
// 																{0.311725, 0.888446, 0.257601, 0.749150, 0.888481, 0.311628, 0.749163, 0.257590},
// 																{0.288297, 0.721839, 0.334882, 0.899547, 0.721936, 0.288198, 0.899560, 0.334871},
// 																{0.279791, 0.569930, 0.421574, 1.048906, 0.570027, 0.279693, 1.048918, 0.421563},
// 																{0.286686, 0.437951, 0.511224, 1.189075, 0.438049, 0.286587, 1.189088, 0.511214},
// 																{0.308171, 0.331721, 0.598926, 1.316163, 0.331820, 0.308073, 1.316175, 0.598916},
// 																{0.344118, 0.255882, 0.682841, 1.430585, 0.255982, 0.344020, 1.430597, 0.682832},
// 																{0.393365, 0.215163, 0.762928, 1.533217, 0.215262, 0.393266, 1.533229, 0.762919},
// 																{0.456680, 0.215120, 0.837693, 1.625613, 0.215219, 0.456580, 1.625624, 0.837684}};

// float vel[TIMESTEPS][MOTORS] = {{15.208288, 5.196631, 14.856636, 17.943012, 5.196727, 15.208387, 17.942915, 14.856657},
// 																{15.219876, 5.214287, 14.852277, 17.908215, 5.214312, 15.219862, 17.908171, 14.852279},
// 																{15.229264, 5.229532, 14.847982, 17.875181, 5.229534, 15.229234, 17.875157, 14.847983},
// 																{15.236333, 5.241885, 14.843530, 17.843828, 5.241900, 15.236301, 17.843811, 14.843526},
// 																{15.243243, 5.254293, 14.839175, 17.812726, 5.254300, 15.243222, 17.812711, 14.839173},
// 																{15.250185, 5.266646, 14.834690, 17.781559, 5.266665, 15.250159, 17.781543, 14.834686},
// 																{15.256966, 5.279047, 14.830306, 17.750640, 5.279065, 15.256959, 17.750623, 14.830302},
// 																{15.263789, 5.291399, 14.825791, 17.719654, 5.291420, 15.263765, 17.719638, 14.825785},
// 																{15.270449, 5.303791, 14.821378, 17.688917, 5.303810, 15.270443, 17.688900, 14.821372},
// 																{15.277156, 5.316127, 14.816833, 17.658111, 5.316147, 15.277129, 17.658095, 14.816826},
// 																{15.283696, 5.328506, 14.812393, 17.627555, 5.328523, 15.283685, 17.627540, 14.812384},
// 																{15.290279, 5.340831, 14.807821, 17.596932, 5.340852, 15.290250, 17.596917, 14.807811},
// 																{15.296697, 5.353204, 14.803355, 17.566559, 5.353218, 15.296681, 17.566545, 14.803343},
// 																{15.303156, 5.365523, 14.798756, 17.536120, 5.365543, 15.303124, 17.536106, 14.798746},
// 																{15.309452, 5.377893, 14.794264, 17.505931, 5.377902, 15.309429, 17.505919, 14.794254},
// 																{15.315786, 5.390205, 14.789640, 17.475674, 5.390222, 15.315750, 17.475665, 14.789633},
// 																{15.321962, 5.402575, 14.785123, 17.445668, 5.402573, 15.321927, 17.445664, 14.785121},
// 																{15.328168, 5.414881, 14.780476, 17.415595, 5.414893, 15.328126, 17.415597, 14.780477},
// 																{15.334214, 5.427248, 14.775944, 17.385780, 5.427242, 15.334183, 17.385775, 14.775937},
// 																{15.340021, 5.439183, 14.771269, 17.356125, 5.439205, 15.339998, 17.356093, 14.771242},
// 																{15.347205, 5.453313, 14.766847, 17.325431, 5.453413, 15.347304, 17.325359, 14.766749},
// 																{-19.673651, -9.046189, 9.614278, 17.211650, -9.046089, -19.673551, 17.211623, 9.614376},
// 																{-14.545107, -1.519314, 7.767744, 9.739048, -1.519389, -14.545206, 9.738982, 7.767720},
// 																{-9.772452, 5.273335, 6.352611, 3.968632, 5.273312, -9.772371, 3.968550, 6.352547},
// 																{-6.014181, 10.514746, 5.396396, -0.179676, 10.514845, -6.014279, -0.179764, 5.396345},
// 																{-1.989448, 16.080142, 4.466648, -3.856989, 16.080241, -1.989460, -3.857063, 4.466596},
// 																{2.108394, 21.709637, 3.499284, -7.134030, 21.709664, 2.108296, -7.134095, 3.499203},
// 																{5.707638, 26.587177, 2.677460, -9.937867, 26.587276, 5.707737, -9.937953, 2.677394},
// 																{8.598003, 30.369536, 2.009803, -12.287837, 30.369635, 8.597904, -12.287931, 2.009754},
// 																{10.393881, 32.474358, 1.544800, -14.228296, 32.474458, 10.393782, -14.228381, 1.544707},
// 																{11.195537, 33.037770, 1.363396, -15.765808, 33.037868, 11.195438, -15.765896, 1.363307},
// 																{11.228281, 32.417733, 1.441862, -16.928201, 32.417820, 11.228193, -16.928297, 1.441764},
// 																{10.749230, 31.038398, 1.807177, -17.705665, 31.038451, 10.749133, -17.705762, 1.807084},
// 																{10.048712, 29.369953, 2.372152, -18.043249, 29.370031, 10.048621, -18.043331, 2.372056},
// 																{9.241858, 27.605630, 3.115350, -17.915821, 27.605729, 9.241759, -17.915805, 3.115259},
// 																{8.458544, 25.941672, 3.896688, -17.272711, 25.941771, 8.458444, -17.272656, 3.896601},
// 																{7.713256, 24.399932, 4.678399, -16.069114, 24.400015, 7.713158, -16.069212, 4.678305},
// 																{7.056583, 23.042253, 5.336806, -14.499892, 23.042310, 7.056496, -14.499793, 5.336904},
// 																{6.475851, 21.844653, 5.841245, -12.555375, 21.844664, 6.475752, -12.555475, 5.841145},
// 																{5.969950, 20.797958, 6.170448, -10.380347, 20.797966, 5.969881, -10.380247, 6.170548},
// 																{5.546991, 19.902005, 6.260377, -8.041681, 19.902052, 5.546991, -8.041781, 6.260277},
// 																{5.050813, 18.972803, 6.499525, -5.239572, 18.972753, 5.050738, -5.239472, 6.499625},
// 																{4.785155, 18.708782, 6.524463, -4.988881, 18.708777, 4.785076, -4.988783, 6.524547},
// 																{4.782772, 18.685883, 6.531585, -4.977229, 18.685926, 4.782778, -4.977229, 6.531581},
// 																{4.780763, 18.663694, 6.538027, -4.965855, 18.663749, 4.780786, -4.965880, 6.538011},
// 																{4.778924, 18.641993, 6.543955, -4.955024, 18.642049, 4.778953, -4.955050, 6.543923},
// 																{4.777209, 18.620494, 6.549730, -4.944062, 18.620547, 4.777240, -4.944088, 6.549695},
// 																{4.775402, 18.598905, 6.555572, -4.933205, 18.598957, 4.775429, -4.933226, 6.555537},
// 																{4.773716, 18.577519, 6.561262, -4.922215, 18.577565, 4.773739, -4.922229, 6.561232},
// 																{4.771929, 18.556039, 6.567021, -4.911319, 18.556090, 4.771953, -4.911336, 6.566988},
// 																{4.770268, 18.534765, 6.572628, -4.900294, 18.534810, 4.770290, -4.900307, 6.572601},
// 																{4.768508, 18.513396, 6.578306, -4.889365, 18.513447, 4.768534, -4.889384, 6.578272},
// 																{4.766874, 18.492232, 6.583832, -4.878308, 18.492279, 4.766900, -4.878324, 6.583805},
// 																{4.765143, 18.470975, 6.589432, -4.867351, 18.471027, 4.765170, -4.867371, 6.589395},
// 																{4.763534, 18.449921, 6.594878, -4.856264, 18.449971, 4.763564, -4.856283, 6.594849},
// 																{4.761829, 18.428774, 6.600398, -4.845279, 18.428828, 4.761858, -4.845301, 6.600359},
// 																{4.760245, 18.407831, 6.605764, -4.834164, 18.407881, 4.760275, -4.834184, 6.605732},
// 																{4.758564, 18.386794, 6.611203, -4.823150, 18.386846, 4.758591, -4.823171, 6.611161},
// 																{4.757006, 18.365961, 6.616488, -4.812005, 18.366006, 4.757029, -4.812025, 6.616454},
// 																{4.755349, 18.345034, 6.621847, -4.800963, 18.345079, 4.755368, -4.800984, 6.621802},
// 																{4.753814, 18.324307, 6.627049, -4.789790, 18.324348, 4.753830, -4.789808, 6.627014},
// 																{4.752206, 18.303545, 6.632320, -4.778728, 18.303603, 4.752236, -4.778747, 6.632274},
// 																{4.750497, 18.282574, 6.637467, -4.767488, 18.282660, 4.750552, -4.767504, 6.637437},
// 																{4.444696, 17.389367, -25.378543, -9.012775, 17.389466, 4.444795, -9.012676, -25.378643},
// 																{0.422581, 8.634837, -26.025995, -10.291638, 8.634935, 0.422541, -10.291541, -26.025896},
// 																{-2.872046, 1.549230, -26.774947, -11.756252, 1.549322, -2.872038, -11.756154, -26.774936},
// 																{-5.397138, -4.035490, -27.675041, -13.484422, -4.035402, -5.397184, -13.484324, -27.674969},
// 																{-7.650886, -9.434425, -27.983014, -14.757776, -9.434328, -7.650979, -14.757686, -27.982918},
// 																{-9.672593, -14.829387, -27.391745, -15.173740, -14.829294, -9.672677, -15.173656, -27.391647},
// 																{-11.327592, -20.020867, -25.287917, -13.778152, -20.020774, -11.327666, -13.778062, -25.287821},
// 																{-12.633791, -25.075078, -21.340449, -9.923380, -25.074980, -12.633878, -9.923282, -21.340351},
// 																{-13.537871, -29.734599, -16.170016, -4.130883, -29.734516, -13.537953, -4.130785, -16.169920},
// 																{-14.095548, -34.145246, -10.224690, 3.071006, -34.145158, -14.095598, 3.071070, -10.224591},
// 																{-13.552855, -36.882765, -3.709449, 11.193847, -36.882669, -13.552946, 11.193845, -3.709353},
// 																{-11.621591, -37.407862, 3.008677, 19.335505, -37.407764, -11.621620, 19.335455, 3.008769},
// 																{-9.235185, -37.027906, 9.214824, 26.075262, -37.027814, -9.235096, 26.075217, 9.214917},
// 																{-6.406997, -35.722082, 14.349770, 30.454783, -35.721987, -6.406930, 30.454756, 14.349864},
// 																{-3.357700, -33.288216, 17.360078, 31.588402, -33.288118, -3.357615, 31.588371, 17.360166},
// 																{-0.167567, -29.687963, 18.507781, 30.290433, -29.687867, -0.167535, 30.290398, 18.507875},
// 																{2.961213, -24.920178, 18.507503, 27.851708, -24.920125, 2.961295, 27.851662, 18.507595},
// 																{5.974606, -19.086310, 17.856988, 25.076050, -19.086211, 5.974629, 25.075998, 17.857079},
// 																{8.890534, -12.203544, 17.016357, 22.503369, -12.203447, 8.890632, 22.503316, 17.016448},
// 																{11.603815, -4.485356, 16.148690, 20.251577, -4.485455, 11.603716, 20.251516, 16.148766},
// 																{14.821626, 4.789595, 14.886701, 18.165096, 4.789694, 14.821724, 18.164999, 14.886672}};

// float u[TIMESTEPS][MOTORS] = {{0.039207, 0.061161, 0.003953, -0.078132, 0.060999, 0.039064, -0.077895, 0.003909},
// 															{0.039207, 0.061161, 0.003953, -0.078132, 0.060999, 0.039064, -0.077895, 0.003909},
// 															{0.026988, 0.045214, -0.000039, -0.062277, 0.045221, 0.026996, -0.062279, -0.000028},
// 															{0.026988, 0.045214, -0.000039, -0.062277, 0.045221, 0.026996, -0.062279, -0.000028},
// 															{0.026949, 0.045667, -0.000340, -0.062311, 0.045660, 0.026944, -0.062302, -0.000330},
// 															{0.026949, 0.045667, -0.000340, -0.062311, 0.045660, 0.026944, -0.062302, -0.000330},
// 															{0.026901, 0.046109, -0.000639, -0.062337, 0.046107, 0.026899, -0.062332, -0.000634},
// 															{0.026901, 0.046109, -0.000639, -0.062337, 0.046107, 0.026899, -0.062332, -0.000634},
// 															{0.026854, 0.046550, -0.000941, -0.062365, 0.046548, 0.026852, -0.062359, -0.000939},
// 															{0.026854, 0.046550, -0.000941, -0.062365, 0.046548, 0.026852, -0.062359, -0.000939},
// 															{0.026807, 0.046987, -0.001244, -0.062394, 0.046983, 0.026807, -0.062386, -0.001245},
// 															{0.026807, 0.046987, -0.001244, -0.062394, 0.046983, 0.026807, -0.062386, -0.001245},
// 															{0.026757, 0.047424, -0.001548, -0.062423, 0.047412, 0.026761, -0.062411, -0.001552},
// 															{0.026757, 0.047424, -0.001548, -0.062423, 0.047412, 0.026761, -0.062411, -0.001552},
// 															{0.026704, 0.047855, -0.001853, -0.062451, 0.047843, 0.026708, -0.062435, -0.001860},
// 															{0.026704, 0.047855, -0.001853, -0.062451, 0.047843, 0.026708, -0.062435, -0.001860},
// 															{0.026652, 0.048278, -0.002163, -0.062478, 0.048267, 0.026656, -0.062459, -0.002171},
// 															{0.026652, 0.048278, -0.002163, -0.062478, 0.048267, 0.026656, -0.062459, -0.002171},
// 															{0.026600, 0.048699, -0.002469, -0.062512, 0.048687, 0.026604, -0.062478, -0.002486},
// 															{0.026600, 0.048699, -0.002469, -0.062512, 0.048687, 0.026604, -0.062478, -0.002486},
// 															{0.038794, 0.067164, -0.000007, -0.078504, 0.067151, 0.038790, -0.078449, -0.000014},
// 															{0.720008, 1.246191, 0.062036, -1.420027, 1.246233, 0.719656, -1.420017, 0.062089},
// 															{0.720008, 1.246191, 0.062036, -1.420027, 1.246233, 0.719656, -1.420017, 0.062089},
// 															{0.672793, 0.688173, 0.023033, -0.889000, 0.687832, 0.673183, -0.889012, 0.023028},
// 															{0.672793, 0.688173, 0.023033, -0.889000, 0.687832, 0.673183, -0.889012, 0.023028},
// 															{0.808753, 0.657883, 0.032837, -0.677691, 0.658156, 0.808478, -0.677706, 0.032841},
// 															{0.808753, 0.657883, 0.032837, -0.677691, 0.658156, 0.808478, -0.677706, 0.032841},
// 															{0.768471, 0.612266, 0.083231, -0.466071, 0.612906, 0.767824, -0.466087, 0.083232},
// 															{0.768471, 0.612266, 0.083231, -0.466071, 0.612906, 0.767824, -0.466087, 0.083232},
// 															{0.733845, 0.400226, 0.116494, -0.258886, 0.400231, 0.733860, -0.258892, 0.116495},
// 															{0.733845, 0.400226, 0.116494, -0.258886, 0.400231, 0.733860, -0.258892, 0.116495},
// 															{0.654835, 0.223808, 0.101620, -0.069872, 0.223814, 0.654850, -0.069878, 0.101630},
// 															{0.654835, 0.223808, 0.101620, -0.069872, 0.223814, 0.654850, -0.069878, 0.101630},
// 															{0.566301, 0.131259, 0.040606, 0.100100, 0.131264, 0.566326, 0.100083, 0.040590},
// 															{0.566301, 0.131259, 0.040606, 0.100100, 0.131264, 0.566326, 0.100083, 0.040590},
// 															{0.494659, 0.082267, -0.038315, 0.264566, 0.082266, 0.494676, 0.264637, -0.038243},
// 															{0.494659, 0.082267, -0.038315, 0.264566, 0.082266, 0.494676, 0.264637, -0.038243},
// 															{0.517614, 0.075204, -0.073363, 0.300386, 0.075187, 0.517576, 0.300268, -0.073416},
// 															{0.517614, 0.075204, -0.073363, 0.300386, 0.075187, 0.517576, 0.300268, -0.073416},
// 															{0.514338, 0.061061, -0.118291, 0.364531, 0.061144, 0.514716, 0.364492, -0.118234},
// 															{0.514338, 0.061061, -0.118291, 0.364531, 0.061144, 0.514716, 0.364492, -0.118234},
// 															{-0.128372, -0.077703, -0.145700, 0.559950, -0.078177, -0.130646, 0.560515, -0.145008},
// 															{-0.018186, -0.038603, 0.004242, 0.020523, -0.038418, -0.018120, 0.020358, 0.004064},
// 															{-0.018186, -0.038603, 0.004242, 0.020523, -0.038418, -0.018120, 0.020358, 0.004064},
// 															{-0.014615, -0.033432, 0.001341, 0.016587, -0.033425, -0.014630, 0.016591, 0.001326},
// 															{-0.014615, -0.033432, 0.001341, 0.016587, -0.033425, -0.014630, 0.016591, 0.001326},
// 															{-0.014551, -0.033329, 0.001086, 0.016905, -0.033317, -0.014557, 0.016899, 0.001066},
// 															{-0.014551, -0.033329, 0.001086, 0.016905, -0.033317, -0.014557, 0.016899, 0.001066},
// 															{-0.014483, -0.033222, 0.000825, 0.017213, -0.033216, -0.014488, 0.017212, 0.000813},
// 															{-0.014483, -0.033222, 0.000825, 0.017213, -0.033216, -0.014488, 0.017212, 0.000813},
// 															{-0.014417, -0.033117, 0.000566, 0.017522, -0.033114, -0.014419, 0.017521, 0.000557},
// 															{-0.014417, -0.033117, 0.000566, 0.017522, -0.033114, -0.014419, 0.017521, 0.000557},
// 															{-0.014350, -0.033012, 0.000308, 0.017829, -0.033012, -0.014351, 0.017829, 0.000302},
// 															{-0.014350, -0.033012, 0.000308, 0.017829, -0.033012, -0.014351, 0.017829, 0.000302},
// 															{-0.014285, -0.032907, 0.000050, 0.018135, -0.032909, -0.014284, 0.018135, 0.000047},
// 															{-0.014285, -0.032907, 0.000050, 0.018135, -0.032909, -0.014284, 0.018135, 0.000047},
// 															{-0.014219, -0.032802, -0.000207, 0.018440, -0.032806, -0.014217, 0.018440, -0.000210},
// 															{-0.014219, -0.032802, -0.000207, 0.018440, -0.032806, -0.014217, 0.018440, -0.000210},
// 															{-0.014154, -0.032697, -0.000466, 0.018745, -0.032702, -0.014152, 0.018744, -0.000468},
// 															{-0.014154, -0.032697, -0.000466, 0.018745, -0.032702, -0.014152, 0.018744, -0.000468},
// 															{-0.014090, -0.032591, -0.000726, 0.019048, -0.032600, -0.014087, 0.019048, -0.000727},
// 															{-0.014090, -0.032591, -0.000726, 0.019048, -0.032600, -0.014087, 0.019048, -0.000727},
// 															{-0.017212, -0.037102, 0.001438, 0.024521, -0.037113, -0.017212, 0.024494, 0.001431},
// 															{-0.509879, -1.394311, -0.199851, 0.703856, -1.394333, -0.509879, 0.705141, -0.201098},
// 															{-0.509879, -1.394311, -0.199851, 0.703856, -1.394333, -0.509879, 0.705141, -0.201098},
// 															{-0.310862, -0.905084, -0.007363, 0.626698, -0.905090, -0.310859, 0.627072, -0.007733},
// 															{-0.310862, -0.905084, -0.007363, 0.626698, -0.905090, -0.310859, 0.627072, -0.007733},
// 															{-0.226209, -0.746817, 0.198092, 0.770727, -0.746819, -0.226212, 0.770827, 0.198057},
// 															{-0.226209, -0.746817, 0.198092, 0.770727, -0.746819, -0.226212, 0.770827, 0.198057},
// 															{-0.125439, -0.529108, 0.415374, 0.902617, -0.529112, -0.125454, 0.903282, 0.414847},
// 															{-0.125439, -0.529108, 0.415374, 0.902617, -0.529112, -0.125454, 0.903282, 0.414847},
// 															{-0.035860, -0.313469, 0.531773, 0.951710, -0.313485, -0.035874, 0.952999, 0.530645},
// 															{-0.035860, -0.313469, 0.531773, 0.951710, -0.313485, -0.035874, 0.952999, 0.530645},
// 															{0.128003, 0.158432, 0.778171, 0.981293, 0.158431, 0.127984, 0.982132, 0.777497},
// 															{0.128003, 0.158432, 0.778171, 0.981293, 0.158431, 0.127984, 0.982132, 0.777497},
// 															{0.161472, 0.275712, 0.842845, 0.952044, 0.275718, 0.161460, 0.953277, 0.841940},
// 															{0.161472, 0.275712, 0.842845, 0.952044, 0.275718, 0.161460, 0.953277, 0.841940},
// 															{0.188544, 0.431184, 0.811423, 0.603679, 0.431185, 0.188535, 0.603676, 0.811563},
// 															{0.188544, 0.431184, 0.811423, 0.603679, 0.431185, 0.188535, 0.603676, 0.811563},
// 															{0.198272, 0.597502, 0.680532, 0.316573, 0.597507, 0.198243, 0.316438, 0.680402},
// 															{0.198272, 0.597502, 0.680532, 0.316573, 0.597507, 0.198243, 0.316438, 0.680402},
// 															{0.213709, 0.789726, 0.534221, 0.169805, 0.789683, 0.213613, 0.169788, 0.534262},
// 															{0.213709, 0.789726, 0.534221, 0.169805, 0.789683, 0.213613, 0.169788, 0.534262},
// 															{0.411505, 1.141278, -0.220036, -0.168463, 1.141519, 0.411791, -0.167959, -0.223169}};
//
// float times[TIMESTEPS] = {0.000000, 0.000151, 0.000303, 0.000454, 0.000605, 0.000757, 0.000908, 0.001059, 0.001211, 0.001362, 0.001513, 0.001665, 0.001816, 0.001967, 0.002119, 0.002270, 0.002421, 0.002573, 0.002724, 0.002875, 0.003027, 0.003027, 0.007150, 0.011274, 0.015397, 0.019521, 0.023645, 0.027768, 0.031892, 0.036015, 0.040139, 0.044262, 0.048386, 0.052510, 0.056633, 0.060757, 0.064880, 0.069004, 0.073127, 0.077251, 0.081374, 0.085498, 0.085498, 0.085651, 0.085804, 0.085957, 0.086110, 0.086263, 0.086416, 0.086569, 0.086722, 0.086875, 0.087028, 0.087181, 0.087334, 0.087487, 0.087640, 0.087793, 0.087946, 0.088099, 0.088252, 0.088405, 0.088558, 0.088558, 0.093369, 0.098180, 0.102991, 0.107802, 0.112613, 0.117424, 0.122235, 0.127046, 0.131857, 0.136669, 0.141480, 0.146291, 0.151102, 0.155913, 0.160724, 0.165535, 0.170346, 0.175157, 0.179968, 0.184779};

float pos[TIMESTEPS][MOTORS] = {{0.456580,0.215020,0.837780,1.625513,0.215119,0.456482,1.625524,0.837784},{0.458896,0.215851,0.839891,1.628079,0.215932,0.458864,1.628090,0.839896},{0.461286,0.216499,0.842176,1.630833,0.216598,0.461188,1.630845,0.842180},{0.463604,0.217333,0.844284,1.633389,0.217413,0.463572,1.633401,0.844289},{0.465998,0.217985,0.846568,1.636134,0.218084,0.465900,1.636146,0.846572},{0.468319,0.218823,0.848676,1.638681,0.218903,0.468287,1.638692,0.848680},{0.470714,0.219479,0.850959,1.641416,0.219578,0.470616,1.641428,0.850963},{0.473039,0.220321,0.853065,1.643954,0.220401,0.473006,1.643965,0.853069},{0.475434,0.220981,0.855346,1.646680,0.221080,0.475335,1.646691,0.855350},{0.477762,0.221826,0.857451,1.649208,0.221906,0.477729,1.649219,0.857455},{0.480158,0.222490,0.859731,1.651924,0.222589,0.480059,1.651936,0.859735},{0.482490,0.223339,0.861834,1.654443,0.223419,0.482457,1.654454,0.861839},{0.484886,0.224006,0.864113,1.657151,0.224106,0.484787,1.657162,0.864117},{0.487221,0.224860,0.866215,1.659660,0.224940,0.487188,1.659671,0.866220},{0.489618,0.225531,0.868492,1.662358,0.225630,0.489519,1.662370,0.868496},{0.491957,0.226387,0.870592,1.664859,0.226467,0.491924,1.664870,0.870597},{0.494354,0.227062,0.872869,1.667548,0.227161,0.494255,1.667559,0.872873},{0.496696,0.227923,0.874968,1.670039,0.228003,0.496663,1.670051,0.874973},{0.499093,0.228601,0.877242,1.672719,0.228700,0.498994,1.672731,0.877246},{0.501439,0.229465,0.879340,1.675201,0.229546,0.501405,1.675213,0.879345},{0.503836,0.230147,0.881613,1.677873,0.230247,0.503737,1.677884,0.881617},{0.503736,0.230047,0.881513,1.677773,0.230147,0.503836,1.677784,0.881517},{0.433257,0.208666,0.917353,1.732804,0.208696,0.433344,1.732815,0.917356},{0.383392,0.216608,0.946268,1.760331,0.216568,0.383465,1.760342,0.946271},{0.350902,0.249098,0.970632,1.768031,0.249059,0.350941,1.768042,0.970583},{0.334258,0.303670,0.990909,1.759397,0.303631,0.334264,1.759407,0.990912},{0.334625,0.381893,1.007433,1.736623,0.381854,0.334631,1.736633,1.007434},{0.351061,0.481579,1.020068,1.701112,0.481540,0.351067,1.701122,1.020070},{0.380882,0.599637,1.029728,1.655103,0.599599,0.380888,1.655007,1.029731},{0.420566,0.729634,1.036853,1.600236,0.729596,0.420571,1.600244,1.036858},{0.465293,0.865162,1.042909,1.538116,0.865125,0.465297,1.538124,1.042914},{0.511940,1.000374,1.048554,1.470629,1.000337,0.511944,1.470637,1.048559},{0.557279,1.131156,1.055333,1.398920,1.131119,0.557283,1.398928,1.055337},{0.600386,1.255854,1.063832,1.325112,1.255818,0.600389,1.325120,1.063836},{0.640101,1.373141,1.075086,1.250646,1.373105,0.640104,1.250653,1.075090},{0.676737,1.483559,1.089677,1.177967,1.483523,0.676739,1.177974,1.089680},{0.709999,1.587140,1.107351,1.108953,1.587104,0.710001,1.108985,1.107354},{0.740571,1.684942,1.128191,1.045846,1.684906,0.740573,1.045853,1.128193},{0.768396,1.777287,1.151433,0.990034,1.777252,0.768398,0.990041,1.151449},{0.794181,1.865205,1.176224,0.942517,1.865170,0.794182,0.942523,1.176226},{0.818101,1.948981,1.201952,0.904425,1.948946,0.818102,0.904432,1.201953},{0.839927,2.029193,1.228159,0.876733,2.029158,0.839928,0.876739,1.228160},{0.840027,2.029093,1.228259,0.876633,2.029058,0.840028,0.876639,1.228159},{0.840784,2.031811,1.229372,0.875867,2.031776,0.840785,0.875869,1.229293},{0.841390,2.034711,1.230358,0.875010,2.034676,0.841391,0.875016,1.230258},{0.841986,2.037422,1.231345,0.874240,2.037388,0.841987,0.874243,1.231305},{0.842753,2.040316,1.232460,0.873394,2.040281,0.842754,0.873400,1.232360},{0.843348,2.043020,1.233450,0.872627,2.042985,0.843349,0.872630,1.233409},{0.844114,2.045907,1.234566,0.871784,2.045872,0.844115,0.871791,1.234466},{0.844709,2.048604,1.235558,0.871021,2.048570,0.844710,0.871024,1.235518},{0.845474,2.051485,1.236676,0.870181,2.051450,0.845475,0.870188,1.236576},{0.846069,2.054176,1.237669,0.869422,2.054142,0.846069,0.869424,1.237629},{0.846834,2.057050,1.238789,0.868585,2.057016,0.846834,0.868592,1.238689},{0.847427,2.059735,1.239784,0.867829,2.059701,0.847428,0.867832,1.239745},{0.848192,2.062603,1.240905,0.866996,2.062568,0.848193,0.867002,1.240805},{0.848785,2.065281,1.241903,0.866243,2.065247,0.848786,0.866246,1.241863},{0.849549,2.068142,1.243025,0.865413,2.068107,0.849550,0.865419,1.242925},{0.850142,2.070814,1.244025,0.864664,2.070780,0.850143,0.864667,1.243985},{0.850905,2.073668,1.245148,0.863837,2.073634,0.850906,0.863844,1.245048},{0.851498,2.076334,1.246150,0.863092,2.076300,0.851498,0.863095,1.246111},{0.852260,2.079182,1.247274,0.862268,2.079147,0.852261,0.862274,1.247174},{0.852852,2.081841,1.248277,0.861527,2.081807,0.852853,0.861529,1.248236},{0.853614,2.084683,1.249404,0.860706,2.084648,0.853615,0.860712,1.249304},{0.853514,2.084583,1.249304,0.860606,2.084548,0.853515,0.860612,1.249286},{0.865081,2.146565,1.125639,0.814393,2.146531,0.865082,0.814400,1.125622},{0.858847,2.170244,0.998816,0.761381,2.170211,0.858848,0.761388,0.998799},{0.838996,2.164239,0.867548,0.700631,2.164206,0.838997,0.700639,0.867531},{0.807450,2.131612,0.733574,0.632462,2.131580,0.807451,0.632470,0.733557},{0.765781,2.073027,0.599712,0.559885,2.073047,0.765781,0.559893,0.599696},{0.715068,1.989149,0.472533,0.489464,1.989117,0.715067,0.489473,0.472518},{0.657371,1.880361,0.359828,0.431822,1.880330,0.657414,0.431832,0.359813},{0.594249,1.748407,0.269255,0.397188,1.748376,0.594246,0.397198,0.269240},{0.527285,1.593922,0.205683,0.394319,1.593892,0.527237,0.394331,0.205669},{0.460485,1.422441,0.171886,0.428114,1.422412,0.460388,0.428128,0.171872},{0.399695,1.243221,0.170355,0.502165,1.243192,0.399599,0.502179,0.170343},{0.349491,1.063851,0.200114,0.611814,1.063823,0.349392,0.611827,0.200102},{0.311725,0.888446,0.257601,0.749150,0.888481,0.311628,0.749163,0.257590},{0.288297,0.721839,0.334882,0.899547,0.721936,0.288198,0.899560,0.334871},{0.279791,0.569930,0.421574,1.048906,0.570027,0.279693,1.048918,0.421563},{0.286686,0.437951,0.511224,1.189075,0.438049,0.286587,1.189088,0.511214},{0.308171,0.331721,0.598926,1.316163,0.331820,0.308073,1.316175,0.598916},{0.344118,0.255882,0.682841,1.430585,0.255982,0.344020,1.430597,0.682832},{0.393365,0.215163,0.762928,1.533217,0.215262,0.393266,1.533229,0.762919},{0.456680,0.215120,0.837693,1.625613,0.215219,0.456580,1.625624,0.837684}};
float vel[TIMESTEPS][MOTORS] = {{15.208288,5.196631,14.856636,17.943012,5.196727,15.208387,17.942915,14.856657},{15.219876,5.214287,14.852277,17.908215,5.214312,15.219862,17.908171,14.852279},{15.229264,5.229532,14.847982,17.875181,5.229534,15.229234,17.875157,14.847983},{15.236333,5.241885,14.843530,17.843828,5.241900,15.236301,17.843811,14.843526},{15.243243,5.254293,14.839175,17.812726,5.254300,15.243222,17.812711,14.839173},{15.250185,5.266646,14.834690,17.781559,5.266665,15.250159,17.781543,14.834686},{15.256966,5.279047,14.830306,17.750640,5.279065,15.256959,17.750623,14.830302},{15.263789,5.291399,14.825791,17.719654,5.291420,15.263765,17.719638,14.825785},{15.270449,5.303791,14.821378,17.688917,5.303810,15.270443,17.688900,14.821372},{15.277156,5.316127,14.816833,17.658111,5.316147,15.277129,17.658095,14.816826},{15.283696,5.328506,14.812393,17.627555,5.328523,15.283685,17.627540,14.812384},{15.290279,5.340831,14.807821,17.596932,5.340852,15.290250,17.596917,14.807811},{15.296697,5.353204,14.803355,17.566559,5.353218,15.296681,17.566545,14.803343},{15.303156,5.365523,14.798756,17.536120,5.365543,15.303124,17.536106,14.798746},{15.309452,5.377893,14.794264,17.505931,5.377902,15.309429,17.505919,14.794254},{15.315786,5.390205,14.789640,17.475674,5.390222,15.315750,17.475665,14.789633},{15.321962,5.402575,14.785123,17.445668,5.402573,15.321927,17.445664,14.785121},{15.328168,5.414881,14.780476,17.415595,5.414893,15.328126,17.415597,14.780477},{15.334214,5.427248,14.775944,17.385780,5.427242,15.334183,17.385775,14.775937},{15.340021,5.439183,14.771269,17.356125,5.439205,15.339998,17.356093,14.771242},{15.347205,5.453313,14.766847,17.325431,5.453413,15.347304,17.325359,14.766749},{-19.673651,-9.046189,9.614278,17.211650,-9.046089,-19.673551,17.211623,9.614376},{-14.545107,-1.519314,7.767744,9.739048,-1.519389,-14.545206,9.738982,7.767720},{-9.772452,5.273335,6.352611,3.968632,5.273312,-9.772371,3.968550,6.352547},{-6.014181,10.514746,5.396396,-0.179676,10.514845,-6.014279,-0.179764,5.396345},{-1.989448,16.080142,4.466648,-3.856989,16.080241,-1.989460,-3.857063,4.466596},{2.108394,21.709637,3.499284,-7.134030,21.709664,2.108296,-7.134095,3.499203},{5.707638,26.587177,2.677460,-9.937867,26.587276,5.707737,-9.937953,2.677394},{8.598003,30.369536,2.009803,-12.287837,30.369635,8.597904,-12.287931,2.009754},{10.393881,32.474358,1.544800,-14.228296,32.474458,10.393782,-14.228381,1.544707},{11.195537,33.037770,1.363396,-15.765808,33.037868,11.195438,-15.765896,1.363307},{11.228281,32.417733,1.441862,-16.928201,32.417820,11.228193,-16.928297,1.441764},{10.749230,31.038398,1.807177,-17.705665,31.038451,10.749133,-17.705762,1.807084},{10.048712,29.369953,2.372152,-18.043249,29.370031,10.048621,-18.043331,2.372056},{9.241858,27.605630,3.115350,-17.915821,27.605729,9.241759,-17.915805,3.115259},{8.458544,25.941672,3.896688,-17.272711,25.941771,8.458444,-17.272656,3.896601},{7.713256,24.399932,4.678399,-16.069114,24.400015,7.713158,-16.069212,4.678305},{7.056583,23.042253,5.336806,-14.499892,23.042310,7.056496,-14.499793,5.336904},{6.475851,21.844653,5.841245,-12.555375,21.844664,6.475752,-12.555475,5.841145},{5.969950,20.797958,6.170448,-10.380347,20.797966,5.969881,-10.380247,6.170548},{5.546991,19.902005,6.260377,-8.041681,19.902052,5.546991,-8.041781,6.260277},{5.050813,18.972803,6.499525,-5.239572,18.972753,5.050738,-5.239472,6.499625},{4.785155,18.708782,6.524463,-4.988881,18.708777,4.785076,-4.988783,6.524547},{4.782772,18.685883,6.531585,-4.977229,18.685926,4.782778,-4.977229,6.531581},{4.780763,18.663694,6.538027,-4.965855,18.663749,4.780786,-4.965880,6.538011},{4.778924,18.641993,6.543955,-4.955024,18.642049,4.778953,-4.955050,6.543923},{4.777209,18.620494,6.549730,-4.944062,18.620547,4.777240,-4.944088,6.549695},{4.775402,18.598905,6.555572,-4.933205,18.598957,4.775429,-4.933226,6.555537},{4.773716,18.577519,6.561262,-4.922215,18.577565,4.773739,-4.922229,6.561232},{4.771929,18.556039,6.567021,-4.911319,18.556090,4.771953,-4.911336,6.566988},{4.770268,18.534765,6.572628,-4.900294,18.534810,4.770290,-4.900307,6.572601},{4.768508,18.513396,6.578306,-4.889365,18.513447,4.768534,-4.889384,6.578272},{4.766874,18.492232,6.583832,-4.878308,18.492279,4.766900,-4.878324,6.583805},{4.765143,18.470975,6.589432,-4.867351,18.471027,4.765170,-4.867371,6.589395},{4.763534,18.449921,6.594878,-4.856264,18.449971,4.763564,-4.856283,6.594849},{4.761829,18.428774,6.600398,-4.845279,18.428828,4.761858,-4.845301,6.600359},{4.760245,18.407831,6.605764,-4.834164,18.407881,4.760275,-4.834184,6.605732},{4.758564,18.386794,6.611203,-4.823150,18.386846,4.758591,-4.823171,6.611161},{4.757006,18.365961,6.616488,-4.812005,18.366006,4.757029,-4.812025,6.616454},{4.755349,18.345034,6.621847,-4.800963,18.345079,4.755368,-4.800984,6.621802},{4.753814,18.324307,6.627049,-4.789790,18.324348,4.753830,-4.789808,6.627014},{4.752206,18.303545,6.632320,-4.778728,18.303603,4.752236,-4.778747,6.632274},{4.750497,18.282574,6.637467,-4.767488,18.282660,4.750552,-4.767504,6.637437},{4.444696,17.389367,-25.378543,-9.012775,17.389466,4.444795,-9.012676,-25.378643},{0.422581,8.634837,-26.025995,-10.291638,8.634935,0.422541,-10.291541,-26.025896},{-2.872046,1.549230,-26.774947,-11.756252,1.549322,-2.872038,-11.756154,-26.774936},{-5.397138,-4.035490,-27.675041,-13.484422,-4.035402,-5.397184,-13.484324,-27.674969},{-7.650886,-9.434425,-27.983014,-14.757776,-9.434328,-7.650979,-14.757686,-27.982918},{-9.672593,-14.829387,-27.391745,-15.173740,-14.829294,-9.672677,-15.173656,-27.391647},{-11.327592,-20.020867,-25.287917,-13.778152,-20.020774,-11.327666,-13.778062,-25.287821},{-12.633791,-25.075078,-21.340449,-9.923380,-25.074980,-12.633878,-9.923282,-21.340351},{-13.537871,-29.734599,-16.170016,-4.130883,-29.734516,-13.537953,-4.130785,-16.169920},{-14.095548,-34.145246,-10.224690,3.071006,-34.145158,-14.095598,3.071070,-10.224591},{-13.552855,-36.882765,-3.709449,11.193847,-36.882669,-13.552946,11.193845,-3.709353},{-11.621591,-37.407862,3.008677,19.335505,-37.407764,-11.621620,19.335455,3.008769},{-9.235185,-37.027906,9.214824,26.075262,-37.027814,-9.235096,26.075217,9.214917},{-6.406997,-35.722082,14.349770,30.454783,-35.721987,-6.406930,30.454756,14.349864},{-3.357700,-33.288216,17.360078,31.588402,-33.288118,-3.357615,31.588371,17.360166},{-0.167567,-29.687963,18.507781,30.290433,-29.687867,-0.167535,30.290398,18.507875},{2.961213,-24.920178,18.507503,27.851708,-24.920125,2.961295,27.851662,18.507595},{5.974606,-19.086310,17.856988,25.076050,-19.086211,5.974629,25.075998,17.857079},{8.890534,-12.203544,17.016357,22.503369,-12.203447,8.890632,22.503316,17.016448},{11.603815,-4.485356,16.148690,20.251577,-4.485455,11.603716,20.251516,16.148766},{14.821626,4.789595,14.886701,18.165096,4.789694,14.821724,18.164999,14.886672}};
float u[TIMESTEPS][MOTORS] = {{0.027944,0.050509,0.003497,-0.078196,0.050370,0.027739,-0.077946,0.003404},{0.027944,0.050509,0.003497,-0.078196,0.050370,0.027739,-0.077946,0.003404},{0.018139,0.037314,-0.000478,-0.061631,0.037318,0.018150,-0.061601,-0.000490},{0.018139,0.037314,-0.000478,-0.061631,0.037318,0.018150,-0.061601,-0.000490},{0.017846,0.037398,-0.000645,-0.061446,0.037416,0.017866,-0.061453,-0.000650},{0.017846,0.037398,-0.000645,-0.061446,0.037416,0.017866,-0.061453,-0.000650},{0.017573,0.037493,-0.000809,-0.061284,0.037500,0.017571,-0.061282,-0.000817},{0.017573,0.037493,-0.000809,-0.061284,0.037500,0.017571,-0.061282,-0.000817},{0.017313,0.037551,-0.000971,-0.061130,0.037552,0.017302,-0.061125,-0.000980},{0.017313,0.037551,-0.000971,-0.061130,0.037552,0.017302,-0.061125,-0.000980},{0.017032,0.037633,-0.001132,-0.060961,0.037634,0.017021,-0.060959,-0.001141},{0.017032,0.037633,-0.001132,-0.060961,0.037634,0.017021,-0.060959,-0.001141},{0.016748,0.037729,-0.001293,-0.060794,0.037728,0.016734,-0.060790,-0.001297},{0.016748,0.037729,-0.001293,-0.060794,0.037728,0.016734,-0.060790,-0.001297},{0.016464,0.037830,-0.001458,-0.060630,0.037821,0.016444,-0.060614,-0.001445},{0.016464,0.037830,-0.001458,-0.060630,0.037821,0.016444,-0.060614,-0.001445},{0.016170,0.037944,-0.001615,-0.060463,0.037923,0.016149,-0.060438,-0.001593},{0.016170,0.037944,-0.001615,-0.060463,0.037923,0.016149,-0.060438,-0.001593},{0.015803,0.038008,-0.001668,-0.060210,0.038087,0.015922,-0.060345,-0.001842},{0.015803,0.038008,-0.001668,-0.060210,0.038087,0.015922,-0.060345,-0.001842},{0.022530,0.050145,0.002813,-0.074967,0.050609,0.022917,-0.075129,0.002386},{0.475327,1.004635,0.088394,-1.429723,1.004450,0.475345,-1.429720,0.088394},{0.475327,1.004635,0.088394,-1.429723,1.004450,0.475345,-1.429720,0.088394},{0.416919,0.588959,0.071719,-0.884466,0.588948,0.417099,-0.884479,0.071719},{0.416919,0.588959,0.071719,-0.884466,0.588948,0.417099,-0.884479,0.071719},{0.608574,0.617179,0.051746,-0.715272,0.616677,0.609503,-0.715243,0.051698},{0.608574,0.617179,0.051746,-0.715272,0.616677,0.609503,-0.715243,0.051698},{0.635705,0.650214,0.087966,-0.522686,0.648813,0.638125,-0.522684,0.087946},{0.635705,0.650214,0.087966,-0.522686,0.648813,0.638125,-0.522684,0.087946},{0.586071,0.558733,0.103929,-0.339051,0.559175,0.585751,-0.339039,0.103912},{0.586071,0.558733,0.103929,-0.339051,0.559175,0.585751,-0.339039,0.103912},{0.587817,0.332388,0.088181,-0.166216,0.332343,0.587782,-0.166194,0.088172},{0.587817,0.332388,0.088181,-0.166216,0.332343,0.587782,-0.166194,0.088172},{0.531683,0.173442,0.058883,0.008519,0.173477,0.531638,0.008534,0.058871},{0.531683,0.173442,0.058883,0.008519,0.173477,0.531638,0.008534,0.058871},{0.456774,0.097323,0.010557,0.186289,0.097402,0.456863,0.186260,0.010551},{0.456774,0.097323,0.010557,0.186289,0.097402,0.456863,0.186260,0.010551},{0.442195,0.077689,-0.041132,0.300445,0.077750,0.442294,0.300337,-0.041217},{0.442195,0.077689,-0.041132,0.300445,0.077750,0.442294,0.300337,-0.041217},{0.458745,0.072754,-0.083282,0.373905,0.072914,0.459191,0.373778,-0.083303},{0.458745,0.072754,-0.083282,0.373905,0.072914,0.459191,0.373778,-0.083303},{-0.122342,-0.102345,-0.057576,0.526528,-0.102873,-0.124185,0.526999,-0.056985},{-0.012823,-0.039704,0.006681,0.016192,-0.039546,-0.012480,0.015891,0.006482},{-0.012823,-0.039704,0.006681,0.016192,-0.039546,-0.012480,0.015891,0.006482},{-0.011213,-0.034422,0.003093,0.013682,-0.034426,-0.011181,0.013681,0.003043},{-0.011213,-0.034422,0.003093,0.013682,-0.034426,-0.011181,0.013681,0.003043},{-0.011089,-0.034336,0.002833,0.013844,-0.034353,-0.011113,0.013874,0.002839},{-0.011089,-0.034336,0.002833,0.013844,-0.034353,-0.011113,0.013874,0.002839},{-0.011020,-0.034255,0.002573,0.014063,-0.034257,-0.011026,0.014065,0.002583},{-0.011020,-0.034255,0.002573,0.014063,-0.034257,-0.011026,0.014065,0.002583},{-0.010918,-0.034177,0.002329,0.014260,-0.034170,-0.010910,0.014251,0.002332},{-0.010918,-0.034177,0.002329,0.014260,-0.034170,-0.010910,0.014251,0.002332},{-0.010820,-0.034096,0.002098,0.014435,-0.034086,-0.010808,0.014428,0.002096},{-0.010820,-0.034096,0.002098,0.014435,-0.034086,-0.010808,0.014428,0.002096},{-0.010729,-0.034014,0.001864,0.014609,-0.034006,-0.010725,0.014607,0.001859},{-0.010729,-0.034014,0.001864,0.014609,-0.034006,-0.010725,0.014607,0.001859},{-0.010637,-0.033929,0.001624,0.014786,-0.033936,-0.010655,0.014788,0.001619},{-0.010637,-0.033929,0.001624,0.014786,-0.033936,-0.010655,0.014788,0.001619},{-0.010546,-0.033847,0.001381,0.014965,-0.033872,-0.010589,0.014969,0.001379},{-0.010546,-0.033847,0.001381,0.014965,-0.033872,-0.010589,0.014969,0.001379},{-0.010532,-0.033841,0.001134,0.015144,-0.033736,-0.010448,0.015146,0.001140},{-0.010532,-0.033841,0.001134,0.015144,-0.033736,-0.010448,0.015146,0.001140},{-0.012053,-0.038235,0.000873,0.015743,-0.038020,-0.011932,0.015737,0.000886},{-0.416237,-1.458178,-0.120312,0.643618,-1.458149,-0.416231,0.642398,-0.119020},{-0.416237,-1.458178,-0.120312,0.643618,-1.458149,-0.416231,0.642398,-0.119020},{-0.257892,-0.952674,-0.053418,0.550479,-0.952661,-0.257892,0.550088,-0.053031},{-0.257892,-0.952674,-0.053418,0.550479,-0.952661,-0.257892,0.550088,-0.053031},{-0.181253,-0.795919,0.110632,0.709008,-0.795914,-0.181246,0.708790,0.110814},{-0.181253,-0.795919,0.110632,0.709008,-0.795914,-0.181246,0.708790,0.110814},{-0.080309,-0.568414,0.295004,0.877413,-0.568407,-0.080305,0.877412,0.294972},{-0.080309,-0.568414,0.295004,0.877413,-0.568407,-0.080305,0.877412,0.294972},{0.009736,-0.321245,0.369648,0.917528,-0.321250,0.009742,0.917562,0.369601},{0.009736,-0.321245,0.369648,0.917528,-0.321250,0.009742,0.917562,0.369601},{0.176844,0.153266,0.545920,0.957573,0.153266,0.176842,0.957422,0.546117},{0.176844,0.153266,0.545920,0.957573,0.153266,0.176842,0.957422,0.546117},{0.187169,0.299429,0.651003,0.978471,0.299435,0.187162,0.978519,0.651007},{0.187169,0.299429,0.651003,0.978471,0.299435,0.187162,0.978519,0.651007},{0.174218,0.447701,0.657047,0.686565,0.447698,0.174224,0.686577,0.657110},{0.174218,0.447701,0.657047,0.686565,0.447698,0.174224,0.686577,0.657110},{0.140453,0.600164,0.617593,0.322629,0.600167,0.140460,0.322632,0.617640},{0.140453,0.600164,0.617593,0.322629,0.600167,0.140460,0.322632,0.617640},{0.109012,0.764890,0.495281,0.156182,0.764868,0.108994,0.156158,0.495269},{0.109012,0.764890,0.495281,0.156182,0.764868,0.108994,0.156158,0.495269},{0.174828,1.033320,-0.177906,-0.211906,1.033442,0.174937,-0.211684,-0.178989}};
float dfVec[TIMESTEPS][MOTORS] = {{0.122935,0.050002,0.115446,0.123339,0.049976,0.122895,0.123387,0.115428},{0.123024,0.050139,0.115412,0.123070,0.050112,0.122984,0.123119,0.115394},{0.121182,0.047681,0.114603,0.126049,0.047682,0.121184,0.126055,0.114600},{0.121237,0.047776,0.114568,0.125807,0.047777,0.121239,0.125813,0.114566},{0.121233,0.047888,0.114502,0.125603,0.047892,0.121237,0.125601,0.114501},{0.121287,0.047984,0.114468,0.125362,0.047987,0.121290,0.125361,0.114467},{0.121286,0.048098,0.114402,0.125155,0.048100,0.121286,0.125155,0.114400},{0.121339,0.048194,0.114367,0.124915,0.048195,0.121338,0.124916,0.114365},{0.121339,0.048301,0.114301,0.124708,0.048301,0.121337,0.124709,0.114299},{0.121391,0.048396,0.114266,0.124470,0.048396,0.121389,0.124471,0.114264},{0.121387,0.048508,0.114200,0.124267,0.048508,0.121385,0.124267,0.114198},{0.121438,0.048603,0.114165,0.124030,0.048603,0.121435,0.124031,0.114163},{0.121432,0.048717,0.114099,0.123828,0.048717,0.121429,0.123829,0.114098},{0.121482,0.048812,0.114063,0.123593,0.048812,0.121479,0.123594,0.114063},{0.121475,0.048928,0.113996,0.123392,0.048926,0.121471,0.123395,0.113999},{0.121524,0.049023,0.113961,0.123158,0.049021,0.121520,0.123161,0.113963},{0.121514,0.049141,0.113895,0.122959,0.049136,0.121510,0.122964,0.113900},{0.121562,0.049236,0.113859,0.122727,0.049232,0.121558,0.122732,0.113864},{0.121537,0.049344,0.113814,0.122546,0.049359,0.121560,0.122520,0.113780},{0.121582,0.049436,0.113778,0.122317,0.049451,0.121605,0.122290,0.113744},{0.122951,0.051914,0.114618,0.119199,0.052006,0.123027,0.119167,0.114534},{-0.059182,0.126240,0.091523,-0.146148,0.126205,-0.059178,-0.146148,0.091524},{-0.019566,0.184383,0.077259,-0.203872,0.184347,-0.019563,-0.203872,0.077259},{0.005899,0.155708,0.063073,-0.142004,0.155706,0.005935,-0.142008,0.063072},{0.034931,0.196197,0.055686,-0.174049,0.196195,0.034965,-0.174052,0.055686},{0.103435,0.244697,0.044605,-0.169426,0.244599,0.103616,-0.169421,0.044595},{0.135089,0.288183,0.037133,-0.194740,0.288085,0.135270,-0.194735,0.037122},{0.168189,0.332309,0.037855,-0.178803,0.332036,0.168662,-0.178803,0.037850},{0.190516,0.361527,0.032697,-0.196956,0.361254,0.190988,-0.196956,0.032693},{0.194699,0.359927,0.032222,-0.176097,0.360015,0.194636,-0.176095,0.032217},{0.200892,0.364280,0.030820,-0.187974,0.364367,0.200828,-0.187972,0.030816},{0.201485,0.315304,0.028352,-0.163213,0.315296,0.201478,-0.163209,0.028350},{0.197785,0.304649,0.031174,-0.169219,0.304641,0.197777,-0.169215,0.031172},{0.181416,0.260732,0.029819,-0.137716,0.260740,0.181406,-0.137713,0.029816},{0.175183,0.247104,0.035560,-0.136731,0.247111,0.175173,-0.136728,0.035557},{0.154509,0.219390,0.032162,-0.097060,0.219407,0.154525,-0.097065,0.032160},{0.148752,0.207481,0.038200,-0.087763,0.207497,0.148768,-0.087769,0.038198},{0.140833,0.193160,0.033196,-0.053356,0.193173,0.140852,-0.053376,0.033180},{0.136347,0.183909,0.037092,-0.038335,0.183921,0.136365,-0.038357,0.037075},{0.135670,0.174861,0.031407,-0.007193,0.174892,0.135756,-0.007217,0.031404},{0.132402,0.167940,0.032102,0.010872,0.167971,0.132490,0.010847,0.032097},{0.015133,0.126580,0.038967,0.062312,0.126476,0.014773,0.062405,0.039083},{0.034461,0.136769,0.051704,-0.035377,0.136800,0.034527,-0.035435,0.051666},{0.034442,0.136592,0.051759,-0.035287,0.136623,0.034509,-0.035345,0.051720},{0.034741,0.137452,0.051108,-0.035689,0.137451,0.034747,-0.035689,0.051098},{0.034727,0.137284,0.051154,-0.035605,0.137284,0.034733,-0.035605,0.051144},{0.034738,0.137135,0.051148,-0.035489,0.137132,0.034733,-0.035483,0.051149},{0.034724,0.136968,0.051193,-0.035405,0.136965,0.034719,-0.035399,0.051194},{0.034724,0.136819,0.051186,-0.035277,0.136819,0.034723,-0.035277,0.051188},{0.034710,0.136653,0.051231,-0.035193,0.136653,0.034709,-0.035193,0.051232},{0.034717,0.136504,0.051226,-0.035070,0.136505,0.034719,-0.035071,0.051227},{0.034704,0.136339,0.051270,-0.034985,0.136340,0.034706,-0.034987,0.051270},{0.034710,0.136191,0.051268,-0.034865,0.136193,0.034713,-0.034867,0.051267},{0.034697,0.136027,0.051311,-0.034781,0.136029,0.034700,-0.034782,0.051310},{0.034702,0.135880,0.051307,-0.034661,0.135882,0.034703,-0.034662,0.051306},{0.034689,0.135717,0.051350,-0.034576,0.135719,0.034690,-0.034577,0.051349},{0.034695,0.135571,0.051345,-0.034456,0.135570,0.034692,-0.034456,0.051343},{0.034682,0.135409,0.051387,-0.034371,0.135408,0.034679,-0.034371,0.051385},{0.034688,0.135264,0.051380,-0.034250,0.135259,0.034680,-0.034249,0.051379},{0.034675,0.135102,0.051421,-0.034165,0.135098,0.034667,-0.034164,0.051421},{0.034666,0.134944,0.051413,-0.034043,0.134964,0.034682,-0.034043,0.051414},{0.034653,0.134783,0.051454,-0.033958,0.134804,0.034670,-0.033958,0.051455},{0.034343,0.133763,0.051443,-0.033754,0.133806,0.034367,-0.033755,0.051445},{-0.046922,-0.150330,-0.219528,0.056023,-0.150324,-0.046920,0.055785,-0.219277},{-0.077991,-0.217956,-0.224530,0.046144,-0.217950,-0.077990,0.045906,-0.224277},{-0.072530,-0.174009,-0.217256,0.016648,-0.174005,-0.072530,0.016572,-0.217181},{-0.092036,-0.217149,-0.224209,0.003298,-0.217146,-0.092036,0.003223,-0.224133},{-0.094484,-0.228253,-0.194563,0.024409,-0.228251,-0.094483,0.024368,-0.194527},{-0.110101,-0.269928,-0.189996,0.021196,-0.269926,-0.110100,0.021154,-0.189960},{-0.103180,-0.265618,-0.137752,0.064852,-0.265616,-0.103179,0.064852,-0.137758},{-0.113270,-0.304660,-0.107259,0.094629,-0.304658,-0.113270,0.094629,-0.107265},{-0.102675,-0.292402,-0.052748,0.147205,-0.292403,-0.102675,0.147212,-0.052756},{-0.106983,-0.326473,-0.006822,0.202838,-0.326474,-0.106982,0.202845,-0.006830},{-0.070169,-0.254988,0.077917,0.273401,-0.254988,-0.070170,0.273372,0.077956},{-0.055251,-0.259045,0.129813,0.336293,-0.259044,-0.055251,0.336263,0.129852},{-0.034801,-0.227576,0.198267,0.392435,-0.227575,-0.034802,0.392444,0.198269},{-0.012954,-0.217489,0.237933,0.426266,-0.217487,-0.012955,0.426275,0.237935},{0.008073,-0.169743,0.262367,0.378038,-0.169743,0.008075,0.378040,0.262380},{0.032716,-0.141933,0.271232,0.368012,-0.141933,0.032717,0.368014,0.271245},{0.050293,-0.075340,0.263528,0.278128,-0.075339,0.050295,0.278128,0.263538},{0.073570,-0.030275,0.258503,0.256687,-0.030274,0.073572,0.256687,0.258513},{0.089957,0.055049,0.228132,0.204321,0.055046,0.089955,0.204316,0.228131},{0.110917,0.114670,0.221430,0.186926,0.114665,0.110912,0.186921,0.221428},{0.148622,0.238717,0.080265,0.098953,0.238742,0.148644,0.098995,0.080054}};
float times[TIMESTEPS] = {0.000000,0.000151,0.000303,0.000454,0.000605,0.000757,0.000908,0.001059,0.001211,0.001362,0.001513,0.001665,0.001816,0.001967,0.002119,0.002270,0.002421,0.002573,0.002724,0.002875,0.003027,0.003027,0.007150,0.011274,0.015397,0.019521,0.023645,0.027768,0.031892,0.036015,0.040139,0.044262,0.048386,0.052510,0.056633,0.060757,0.064880,0.069004,0.073127,0.077251,0.081374,0.085498,0.085498,0.085651,0.085804,0.085957,0.086110,0.086263,0.086416,0.086569,0.086722,0.086875,0.087028,0.087181,0.087334,0.087487,0.087640,0.087793,0.087946,0.088099,0.088252,0.088405,0.088558,0.088558,0.093369,0.098180,0.102991,0.107802,0.112613,0.117424,0.122235,0.127046,0.131857,0.136669,0.141480,0.146291,0.151102,0.155913,0.160724,0.165535,0.170346,0.175157,0.179968,0.184779};

// float pos[TIMESTEPS][MOTORS] = {{0.763572,1.887841,0.632285,1.774196,1.887818,0.763650,1.774200,0.632287},{0.746088,1.888540,0.682560,1.917284,1.888517,0.746132,1.917289,0.682564},{0.715992,1.839972,0.685158,2.012089,1.839951,0.716061,2.012092,0.685162},{0.677945,1.754325,0.669409,2.064963,1.754302,0.677963,2.064925,0.669404},{0.636997,1.640006,0.647397,2.079150,1.639987,0.637063,2.079152,0.647385},{0.598400,1.503551,0.620301,2.057743,1.503531,0.598405,2.057743,0.620286},{0.565736,1.351644,0.590317,2.003856,1.351626,0.565797,2.003857,0.590306},{0.541688,1.189826,0.559183,1.922470,1.189810,0.541708,1.922468,0.559171},{0.527465,1.025102,0.529437,1.817528,1.025086,0.527524,1.817528,0.529427},{0.523317,0.864919,0.503256,1.694185,0.864900,0.523357,1.694183,0.503241},{0.528094,0.713423,0.482392,1.555760,0.713409,0.528151,1.555759,0.482382},{0.539173,0.571989,0.467441,1.403739,0.571970,0.539205,1.403737,0.467429},{0.554188,0.441168,0.459057,1.239969,0.441156,0.554243,1.239967,0.459047},{0.570371,0.321395,0.456975,1.064550,0.321383,0.570380,1.064546,0.456965},{0.585069,0.214822,0.461127,0.880932,0.214812,0.585123,0.880928,0.461118},{0.595532,0.125655,0.470608,0.692737,0.125643,0.595573,0.692734,0.470605},{0.598626,0.059519,0.483655,0.508745,0.059511,0.598679,0.508740,0.483645},{0.590919,0.024370,0.497643,0.339396,0.024360,0.590968,0.339390,0.497634},{0.572165,0.027835,0.508725,0.200323,0.027827,0.572218,0.200317,0.508716},{0.545007,0.076330,0.513617,0.110821,0.076320,0.545072,0.110814,0.513609},{0.515310,0.184255,0.507577,0.092640,0.184249,0.515410,0.092632,0.507568},{0.515409,0.184155,0.507477,0.092540,0.184149,0.515509,0.092532,0.507469},{0.501629,0.183776,0.504427,0.096292,0.183768,0.501697,0.096280,0.504420},{0.488443,0.183903,0.501082,0.100680,0.183897,0.488541,0.100661,0.501073},{0.475560,0.184826,0.497776,0.105898,0.184818,0.475630,0.105878,0.497770},{0.463214,0.186158,0.494241,0.111560,0.186152,0.463311,0.111535,0.494231},{0.451165,0.188280,0.490781,0.117981,0.188273,0.451243,0.117957,0.490775},{0.439712,0.190861,0.487098,0.124822,0.190855,0.439808,0.124792,0.487088},{0.428574,0.194263,0.483520,0.132407,0.194254,0.428651,0.132380,0.483514},{0.418053,0.198149,0.479731,0.140400,0.198143,0.418148,0.140366,0.479720},{0.407858,0.202860,0.476059,0.149146,0.202851,0.407933,0.149116,0.476052},{0.398277,0.208055,0.472173,0.158308,0.208049,0.398372,0.158273,0.472161},{0.389029,0.214069,0.468412,0.168241,0.214061,0.389101,0.168210,0.468406},{0.380387,0.220562,0.464440,0.178600,0.220555,0.380481,0.178563,0.464427},{0.372151,0.227869,0.460585,0.189745,0.227861,0.372168,0.189716,0.460582},{0.364368,0.235632,0.456551,0.201323,0.235625,0.364462,0.201285,0.456535},{0.356992,0.244202,0.452729,0.213660,0.244194,0.357063,0.213627,0.452720},{0.350223,0.253242,0.448872,0.226387,0.253236,0.350316,0.226347,0.448850},{0.343806,0.263111,0.445328,0.239816,0.263102,0.343877,0.239780,0.445337},{0.338023,0.273473,0.441902,0.253587,0.273467,0.338117,0.253546,0.441940},{0.332598,0.284667,0.438816,0.268011,0.284659,0.332665,0.267974,0.438885},{0.327870,0.296444,0.436255,0.282769,0.296438,0.327963,0.282727,0.436217},{0.327969,0.296344,0.436155,0.282670,0.296338,0.328063,0.282627,0.436146},{0.315116,0.327810,0.393827,0.274746,0.327801,0.315200,0.274704,0.393818},{0.310656,0.369615,0.358048,0.275119,0.369608,0.310749,0.275078,0.358039},{0.312876,0.420309,0.327596,0.283154,0.420291,0.312961,0.283138,0.327588},{0.321235,0.478302,0.302177,0.297824,0.478276,0.321328,0.297833,0.302167},{0.334879,0.543244,0.281029,0.318972,0.543218,0.334969,0.318980,0.281020},{0.353406,0.613594,0.263704,0.345981,0.613568,0.353499,0.345989,0.263695},{0.375514,0.688317,0.250437,0.379326,0.688291,0.375603,0.379335,0.250423},{0.400623,0.765516,0.241424,0.418545,0.765490,0.400716,0.418553,0.241404},{0.427408,0.844118,0.236271,0.463889,0.844092,0.427499,0.463897,0.236251},{0.455463,0.922511,0.235286,0.514614,0.922485,0.455556,0.514621,0.235265},{0.483713,1.000035,0.237946,0.570648,1.000010,0.483803,0.570655,0.237925},{0.512064,1.075599,0.244410,0.630947,1.075574,0.512157,0.630954,0.244387},{0.539787,1.149062,0.253996,0.695169,1.149022,0.539859,0.695176,0.253975},{0.566992,1.219794,0.266719,0.762080,1.219769,0.567085,0.762087,0.266697},{0.593402,1.287819,0.281761,0.831203,1.287793,0.593358,0.831210,0.281739},{0.618753,1.353324,0.299081,0.901322,1.353299,0.618846,0.901329,0.299058},{0.643395,1.415959,0.317891,0.972063,1.415934,0.643469,0.972070,0.317963},{0.666965,1.476225,0.338142,1.042379,1.476200,0.667058,1.042385,0.338119},{0.689907,1.533912,0.359163,1.111797,1.533887,0.689986,1.111799,0.359140},{0.711817,1.589451,0.380728,1.180282,1.589426,0.711911,1.180288,0.380704},{0.711717,1.589351,0.380828,1.180182,1.589327,0.711811,1.180188,0.380804},{0.721494,1.615686,0.392644,1.214742,1.615662,0.721572,1.214749,0.392620},{0.729895,1.640395,0.404719,1.249181,1.640370,0.729988,1.249188,0.404695},{0.736976,1.663432,0.417258,1.283025,1.663408,0.737045,1.283032,0.417235},{0.743166,1.685364,0.429765,1.316553,1.685339,0.743260,1.316560,0.429742},{0.748315,1.705880,0.442579,1.349351,1.705856,0.748381,1.349358,0.442557},{0.752718,1.725419,0.455271,1.381770,1.725394,0.752813,1.381776,0.455249},{0.756250,1.743655,0.468196,1.413417,1.743632,0.756313,1.413423,0.468174},{0.759180,1.761011,0.480938,1.444657,1.760987,0.759275,1.444663,0.480917},{0.761397,1.777170,0.493860,1.475113,1.777147,0.761453,1.475119,0.493839},{0.763138,1.792520,0.506561,1.505160,1.792496,0.763233,1.505166,0.506540},{0.764402,1.806704,0.519421,1.534435,1.806682,0.764433,1.534441,0.519401},{0.765270,1.820045,0.532054,1.563322,1.820021,0.765366,1.563328,0.532034},{0.765936,1.832185,0.544851,1.591463,1.832179,0.765979,1.591468,0.544832},{0.766244,1.843342,0.557422,1.619240,1.843319,0.766333,1.619246,0.557404},{0.766439,1.853359,0.570143,1.646291,1.853349,0.766471,1.646296,0.570126},{0.766296,1.862343,0.582619,1.672992,1.862320,0.766381,1.672997,0.582603},{0.766036,1.870284,0.595223,1.698986,1.870269,0.766062,1.698991,0.595209},{0.765440,1.877169,0.607566,1.724648,1.877146,0.765522,1.724653,0.607553},{0.764735,1.883123,0.619858,1.749654,1.883074,0.764732,1.749658,0.619853},{0.763670,1.887940,0.632192,1.774295,1.887918,0.763749,1.774300,0.632187}};
// float vel[TIMESTEPS][MOTORS] = {{-1.394384,4.214814,12.120830,24.655153,4.214854,-1.394410,24.655086,12.120860},{-3.557566,-3.740921,3.154610,17.015551,-3.740880,-3.557585,17.015477,3.154704},{-5.077922,-9.992671,-1.738135,10.620537,-9.992651,-5.077913,10.620451,-1.738047},{-5.833244,-14.612652,-2.760678,4.769292,-14.612626,-5.833254,4.769240,-2.760651},{-5.931944,-18.340061,-3.605693,-0.536107,-18.340034,-5.931956,-0.536112,-3.605699},{-5.218336,-20.990440,-4.181630,-5.557658,-20.990424,-5.218349,-5.557700,-4.181625},{-4.180115,-22.863824,-4.493123,-9.883461,-22.863805,-4.180131,-9.883502,-4.493115},{-2.784336,-23.781130,-4.462160,-13.580585,-23.781110,-2.784350,-13.580631,-4.462157},{-1.342817,-23.754770,-4.134382,-16.656010,-23.754752,-1.342829,-16.656048,-4.134384},{0.092426,-22.580953,-3.428315,-18.972336,-22.580930,0.092419,-18.972382,-3.428316},{1.202950,-21.211466,-2.621755,-21.072526,-21.211442,1.202940,-21.072568,-2.621757},{1.943871,-19.716507,-1.696796,-22.868761,-19.716483,1.943868,-22.868806,-1.696798},{2.308809,-18.094288,-0.765155,-24.527797,-18.094260,2.308805,-24.527839,-0.765156},{2.295875,-16.479630,0.157595,-26.092506,-16.479607,2.295874,-26.092552,0.157593},{1.873355,-14.224782,0.991290,-26.955651,-14.224747,1.873355,-26.955693,0.991287},{1.044103,-11.415573,1.683188,-27.208539,-11.415553,1.044103,-27.208585,1.683186},{-0.206204,-7.503119,2.015144,-25.772936,-7.503063,-0.206192,-25.772977,2.015143},{-1.994530,-2.485647,1.899893,-22.787614,-2.485690,-1.994524,-22.787658,1.899893},{-3.347532,3.731476,1.229268,-16.952465,3.731547,-3.347500,-16.952503,1.229269},{-4.317764,10.809605,0.048322,-8.377882,10.809659,-4.317721,-8.377930,0.048325},{-4.025056,20.992149,-1.877938,3.750304,20.992191,-4.024971,3.750281,-1.877957},{-24.493878,-1.385354,-5.403982,5.714656,-1.385407,-24.493789,5.714664,-5.403962},{-23.627297,-0.113576,-5.682326,7.221009,-0.113583,-23.627299,7.221006,-5.682326},{-22.831235,1.042000,-5.904476,8.522261,1.042035,-22.831202,8.522256,-5.904476},{-22.128107,2.048986,-6.064490,9.586809,2.048988,-22.128123,9.586806,-6.064491},{-21.390575,3.098198,-6.205745,10.635623,3.098214,-21.390578,10.635623,-6.205743},{-20.617436,4.190684,-6.327797,11.668257,4.190684,-20.617455,11.668253,-6.327796},{-19.822731,5.308080,-6.433893,12.687127,5.308076,-19.822732,12.687128,-6.433888},{-19.004835,6.452348,-6.521985,13.687766,6.452345,-19.004858,13.687764,-6.521984},{-18.183377,7.596821,-6.606786,14.700340,7.596823,-18.183397,14.700344,-6.606779},{-17.359446,8.739918,-6.688458,15.724846,8.739916,-17.359474,15.724842,-6.688454},{-16.535462,9.878683,-6.766464,16.760448,9.878684,-16.535491,16.760454,-6.766453},{-15.712463,11.011651,-6.840758,17.806782,11.011649,-15.712492,17.806789,-6.840760},{-14.892550,12.136194,-6.911137,18.863506,12.136194,-14.892583,18.863517,-6.911122},{-14.078183,13.249301,-6.996770,19.937926,13.249298,-14.078211,19.937917,-6.996749},{-13.261011,14.360720,-6.963570,20.977772,14.360710,-13.261034,20.977746,-6.963496},{-12.445893,15.463458,-6.814328,21.984875,15.463490,-12.445885,21.984859,-6.814300},{-11.607077,16.594695,-6.529912,22.942771,16.594679,-11.607095,22.942746,-6.529836},{-10.745812,17.752269,-6.100811,23.846901,17.752289,-10.745810,23.846894,-6.100789},{-9.862473,18.936806,-5.596929,24.725382,18.936807,-9.862474,24.725381,-5.596871},{-8.999314,20.087530,-5.015559,25.563313,20.087541,-8.999311,25.563295,-5.015489},{-7.870567,21.613747,-4.379925,26.462266,21.613784,-7.870611,26.462284,-4.379889},{-9.016234,13.392152,-23.941291,-6.576682,13.392088,-9.016137,-6.576663,-23.941387},{-4.411664,19.306829,-20.438793,-1.944806,19.306868,-4.411758,-1.944727,-20.438723},{-0.404743,24.439169,-17.280443,2.328808,24.439206,-0.404792,2.328786,-17.280491},{2.839369,28.542770,-14.630352,6.009546,28.542810,2.839280,6.009552,-14.630309},{5.839505,32.298120,-12.209898,9.488373,32.298198,5.839421,9.488354,-12.209900},{8.536908,35.605606,-10.112098,12.637882,35.605661,8.536852,12.637862,-10.112118},{10.757348,38.175376,-7.994564,15.840539,38.175363,10.757280,15.840498,-7.994596},{12.485427,39.972642,-5.864317,19.054586,39.972667,12.485356,19.054516,-5.864357},{13.704488,40.979716,-3.740256,22.202205,40.979802,13.704416,22.202192,-3.740288},{14.462694,41.268829,-1.623042,25.242004,41.268895,14.462652,25.241953,-1.623057},{14.835517,40.968516,0.424218,28.049550,40.968587,14.835484,28.049473,0.424180},{14.895180,40.198147,2.389509,30.576841,40.198213,14.895182,30.576810,2.389511},{14.742410,39.119603,4.206526,32.727317,39.119649,14.742434,32.727287,4.206456},{14.435992,37.832560,5.856946,34.468875,37.832602,14.435983,34.468858,5.856969},{14.041778,36.445558,7.289090,35.754164,36.445542,14.041758,35.754175,7.289098},{13.594644,35.019023,8.492000,36.587342,35.019051,13.594635,36.587355,8.492040},{13.128973,33.604097,9.472786,37.003928,33.604081,13.128966,37.003956,9.472832},{12.658073,32.222883,10.247779,37.049707,32.222865,12.658049,37.049632,10.247729},{12.206881,30.916751,10.800492,36.759077,30.916696,12.206838,36.759001,10.800415},{11.787862,29.705225,11.108980,36.161914,29.705287,11.787928,36.162009,11.109076},{11.326106,28.462132,11.570654,35.595525,28.462042,11.326061,35.595432,11.570560},{11.017485,28.151055,11.653615,35.602879,28.150994,11.017414,35.602906,11.653706},{9.305330,26.128957,12.209550,35.399534,26.128953,9.305353,35.399540,12.209617},{7.901866,24.423868,12.585667,35.043602,24.423870,7.901891,35.043622,12.585731},{6.831849,23.060446,12.779589,34.548168,23.060453,6.831882,34.548169,12.779651},{5.842079,21.768910,12.920675,34.011547,21.768920,5.842107,34.011570,12.920731},{4.927436,20.547474,13.012636,33.440716,20.547480,4.927474,33.440715,13.012695},{4.096351,19.380154,13.069106,32.850659,19.380161,4.096402,32.850681,13.069158},{3.346566,18.263916,13.093076,32.246125,18.263927,3.346607,32.246121,13.093133},{2.670465,17.196126,13.092312,31.636123,17.196142,2.670523,31.636141,13.092362},{2.061736,16.181892,13.067232,31.022953,16.181894,2.061782,31.022946,13.067289},{1.548082,15.164878,13.036329,30.418592,15.164849,1.548163,30.418602,13.036378},{1.128805,14.149493,12.999704,29.823928,14.149475,1.128851,29.823917,12.999760},{0.791010,13.090094,12.966021,29.242808,13.090042,0.791095,29.242807,12.966070},{0.544883,11.975824,12.938207,28.676374,11.975829,0.544893,28.676358,12.938263},{0.305971,10.871938,12.899274,28.117325,10.871966,0.305992,28.117312,12.899326},{0.075792,9.774967,12.850983,27.566750,9.774970,0.075796,27.566732,12.851042},{-0.155929,8.697562,12.791706,27.025383,8.697574,-0.155916,27.025363,12.791759},{-0.389030,7.638736,12.722543,26.493799,7.638766,-0.389032,26.493772,12.722587},{-0.622645,6.594358,12.645390,25.973733,6.594444,-0.622558,25.973702,12.645443},{-0.850126,5.578413,12.573266,25.471330,5.578318,-0.850221,25.471319,12.573347},{-1.115247,4.483199,12.421045,24.943765,4.483291,-1.115154,24.943721,12.421088}};
// float u[TIMESTEPS][MOTORS] = {{-0.038427,-0.913569,-0.824491,-0.585505,-0.913582,-0.038420,-0.585530,-0.824448},{-0.038427,-0.913569,-0.824491,-0.585505,-0.913582,-0.038420,-0.585530,-0.824448},{0.034670,-0.436969,-0.020209,-0.716629,-0.436963,0.034671,-0.716613,-0.020233},{0.034670,-0.436969,-0.020209,-0.716629,-0.436963,0.034671,-0.716613,-0.020233},{0.098355,-0.179175,0.050264,-0.621768,-0.179175,0.098358,-0.621770,0.050265},{0.098355,-0.179175,0.050264,-0.621768,-0.179175,0.098358,-0.621770,0.050265},{0.085203,-0.016954,0.077824,-0.407127,-0.016953,0.085202,-0.407126,0.077822},{0.085203,-0.016954,0.077824,-0.407127,-0.016953,0.085202,-0.407126,0.077822},{0.042195,0.116297,0.086197,-0.207332,0.116293,0.042196,-0.207331,0.086194},{0.042195,0.116297,0.086197,-0.207332,0.116293,0.042196,-0.207331,0.086194},{-0.004139,0.122540,0.060504,-0.124931,0.122537,-0.004140,-0.124929,0.060501},{-0.004139,0.122540,0.060504,-0.124931,0.122537,-0.004140,-0.124929,0.060501},{-0.047147,0.134434,0.030278,-0.083406,0.134432,-0.047154,-0.083405,0.030277},{-0.047147,0.134434,0.030278,-0.083406,0.134432,-0.047154,-0.083405,0.030277},{-0.107392,0.228154,-0.012448,0.033319,0.228150,-0.107404,0.033319,-0.012448},{-0.107392,0.228154,-0.012448,0.033319,0.228150,-0.107404,0.033319,-0.012448},{-0.181467,0.385421,-0.089307,0.277902,0.385404,-0.181486,0.277901,-0.089304},{-0.181467,0.385421,-0.089307,0.277902,0.385404,-0.181486,0.277901,-0.089304},{-0.151615,0.531527,-0.199097,0.668940,0.531558,-0.151620,0.668937,-0.199096},{-0.151615,0.531527,-0.199097,0.668940,0.531558,-0.151620,0.668937,-0.199096},{-0.089014,0.941537,-0.360592,1.163905,0.941376,-0.088760,1.163907,-0.360596},{0.479585,1.166124,-0.385673,1.263935,1.167441,0.478339,1.263910,-0.385692},{0.479585,1.166124,-0.385673,1.263935,1.167441,0.478339,1.263910,-0.385692},{0.494168,0.834581,-0.251460,0.905964,0.836149,0.492509,0.905944,-0.251472},{0.494168,0.834581,-0.251460,0.905964,0.836149,0.492509,0.905944,-0.251472},{0.614254,0.825838,-0.219830,0.874107,0.826465,0.614084,0.874080,-0.219847},{0.614254,0.825838,-0.219830,0.874107,0.826465,0.614084,0.874080,-0.219847},{0.668780,0.823717,-0.194074,0.847656,0.823974,0.669104,0.847633,-0.194093},{0.668780,0.823717,-0.194074,0.847656,0.823974,0.669104,0.847633,-0.194093},{0.659544,0.810239,-0.197389,0.870192,0.810468,0.659880,0.870158,-0.197403},{0.659544,0.810239,-0.197389,0.870192,0.810468,0.659880,0.870158,-0.197403},{0.650213,0.794154,-0.199835,0.891389,0.794358,0.650567,0.891355,-0.199850},{0.650213,0.794154,-0.199835,0.891389,0.794358,0.650567,0.891355,-0.199850},{0.642458,0.774715,-0.202242,0.912429,0.774896,0.642834,0.912351,-0.202206},{0.642458,0.774715,-0.202242,0.912429,0.774896,0.642834,0.912351,-0.202206},{0.670202,0.765824,-0.008074,0.820840,0.765987,0.670622,0.820815,-0.008086},{0.670202,0.765824,-0.008074,0.820840,0.765987,0.670622,0.820815,-0.008086},{0.723430,0.820226,0.220457,0.697870,0.822339,0.720339,0.697893,0.220443},{0.723430,0.820226,0.220457,0.697870,0.822339,0.720339,0.697893,0.220443},{0.767827,0.879710,0.348486,0.634155,0.879845,0.767227,0.634136,0.348519},{0.767827,0.879710,0.348486,0.634155,0.879845,0.767227,0.634136,0.348519},{1.129004,1.569033,0.449167,0.711803,1.571112,1.125664,0.712001,0.449064},{0.976941,1.611326,0.822698,1.452506,1.614286,0.967903,1.447647,0.836095},{0.976941,1.611326,0.822698,1.452506,1.614286,0.967903,1.447647,0.836095},{0.862464,1.184810,0.666038,0.974201,1.184908,0.862606,0.974532,0.665281},{0.862464,1.184810,0.666038,0.974201,1.184908,0.862606,0.974532,0.665281},{0.872933,1.219195,0.545989,0.849971,1.214470,0.878351,0.849851,0.546363},{0.872933,1.219195,0.545989,0.849971,1.214470,0.878351,0.849851,0.546363},{0.826498,1.164534,0.573005,0.902754,1.147146,0.852774,0.897611,0.576416},{0.826498,1.164534,0.573005,0.902754,1.147146,0.852774,0.897611,0.576416},{0.785241,1.037504,0.596800,0.930549,1.054700,0.750521,0.935483,0.598371},{0.785241,1.037504,0.596800,0.930549,1.054700,0.750521,0.935483,0.598371},{0.699352,0.898642,0.588485,0.939151,0.906494,0.683399,0.929130,0.605022},{0.699352,0.898642,0.588485,0.939151,0.906494,0.683399,0.929130,0.605022},{0.665708,0.731043,0.581466,0.900108,0.728587,0.663263,0.892684,0.593124},{0.665708,0.731043,0.581466,0.900108,0.728587,0.663263,0.892684,0.593124},{0.667367,0.529311,0.553481,0.835331,0.533548,0.671804,0.825600,0.560097},{0.667367,0.529311,0.553481,0.835331,0.533548,0.671804,0.825600,0.560097},{0.633595,0.383909,0.649560,0.640528,0.390068,0.640874,0.637023,0.645634},{0.633595,0.383909,0.649560,0.640528,0.390068,0.640874,0.637023,0.645634},{0.586947,0.281254,0.687877,0.426985,0.290595,0.600130,0.422089,0.681184},{0.586947,0.281254,0.687877,0.426985,0.290595,0.600130,0.422089,0.681184},{0.725887,0.339647,0.738116,0.410350,-0.265690,-0.202425,0.769706,1.290812},{-1.015461,-0.969904,1.120010,0.607813,-0.969827,-1.015491,0.607738,1.119900},{-1.015461,-0.969904,1.120010,0.607813,-0.969827,-1.015491,0.607738,1.119900},{-0.672713,-0.682570,0.828605,0.312992,-0.682531,-0.672763,0.312994,0.828618},{-0.672713,-0.682570,0.828605,0.312992,-0.682531,-0.672763,0.312994,0.828618},{-0.585198,-0.652408,0.764669,0.217792,-0.652384,-0.585229,0.217805,0.764710},{-0.585198,-0.652408,0.764669,0.217792,-0.652384,-0.585229,0.217805,0.764710},{-0.476656,-0.641578,0.708640,0.148826,-0.641544,-0.476690,0.148851,0.708711},{-0.476656,-0.641578,0.708640,0.148826,-0.641544,-0.476690,0.148851,0.708711},{-0.373962,-0.628303,0.655812,0.097097,-0.628301,-0.373975,0.097126,0.655896},{-0.373962,-0.628303,0.655812,0.097097,-0.628301,-0.373975,0.097126,0.655896},{-0.210450,-0.698852,0.645167,0.075739,-0.698853,-0.210453,0.075746,0.645241},{-0.210450,-0.698852,0.645167,0.075739,-0.698853,-0.210453,0.075746,0.645241},{-0.046790,-0.829803,0.654892,0.067626,-0.829713,-0.046850,0.067603,0.654928},{-0.046790,-0.829803,0.654892,0.067626,-0.829713,-0.046850,0.067603,0.654928},{-0.025472,-0.841426,0.600769,0.036801,-0.841407,-0.025500,0.036820,0.600907},{-0.025472,-0.841426,0.600769,0.036801,-0.841407,-0.025500,0.036820,0.600907},{-0.024027,-0.829676,0.531903,0.006385,-0.829589,-0.024046,0.006309,0.531747},{-0.024027,-0.829676,0.531903,0.006385,-0.829589,-0.024046,0.006309,0.531747},{-0.020644,-0.821999,0.461959,-0.019548,-0.822214,-0.020812,-0.019163,0.463217},{-0.020644,-0.821999,0.461959,-0.019548,-0.822214,-0.020812,-0.019163,0.463217},{-0.045162,-0.988466,-0.164361,-0.231393,-0.987395,-0.043673,-0.229203,-0.172992}};
// float df[TIMESTEPS][MOTORS] = {{-0.018273,-0.145784,-0.067323,0.076154,-0.145786,-0.018272,0.076149,-0.067314},{-0.034983,-0.207240,-0.136584,0.017141,-0.207242,-0.034981,0.017135,-0.136575},{-0.032457,-0.162493,-0.017372,-0.057856,-0.162492,-0.032457,-0.057854,-0.017376},{-0.038292,-0.198181,-0.025271,-0.103055,-0.198180,-0.038292,-0.103052,-0.025275},{-0.026622,-0.176649,-0.018041,-0.125520,-0.176649,-0.026622,-0.125520,-0.018041},{-0.021110,-0.197122,-0.022490,-0.164309,-0.197122,-0.021109,-0.164310,-0.022489},{-0.015657,-0.179926,-0.019516,-0.155824,-0.179925,-0.015657,-0.155824,-0.019516},{-0.004875,-0.187012,-0.019276,-0.184383,-0.187011,-0.004876,-0.184383,-0.019277},{-0.002136,-0.160796,-0.015110,-0.169137,-0.160796,-0.002136,-0.169137,-0.015110},{0.008951,-0.151728,-0.009656,-0.187030,-0.151729,0.008951,-0.187030,-0.009656},{0.008484,-0.139930,-0.008441,-0.187167,-0.139931,0.008484,-0.187167,-0.008442},{0.014208,-0.128382,-0.001296,-0.201043,-0.128383,0.014208,-0.201043,-0.001297},{0.008631,-0.113529,0.000000,-0.205752,-0.113530,0.008630,-0.205752,-0.000000},{0.008531,-0.101057,0.007128,-0.217839,-0.101057,0.008530,-0.217839,0.007128},{-0.006493,-0.065343,0.005227,-0.201720,-0.065344,-0.006496,-0.201720,0.005227},{-0.012899,-0.043643,0.010572,-0.203673,-0.043644,-0.012901,-0.203674,0.010572},{-0.037018,0.017281,-0.001868,-0.144838,0.017278,-0.037021,-0.144838,-0.001867},{-0.050832,0.056039,-0.002758,-0.121777,0.056035,-0.050836,-0.121777,-0.002757},{-0.055456,0.132586,-0.029371,-0.000366,0.132593,-0.055457,-0.000367,-0.029371},{-0.062951,0.187263,-0.038493,0.065870,0.187269,-0.062952,0.065869,-0.038493},{-0.048469,0.345960,-0.084899,0.256181,0.345929,-0.048419,0.256181,-0.084900},{-0.095586,0.216943,-0.117033,0.290883,0.217200,-0.095828,0.290878,-0.117037},{-0.088892,0.226767,-0.119183,0.302519,0.227024,-0.089135,0.302514,-0.119187},{-0.079895,0.170972,-0.094699,0.242689,0.171278,-0.080219,0.242685,-0.094701},{-0.074464,0.178750,-0.095935,0.250913,0.179056,-0.074788,0.250909,-0.095937},{-0.045324,0.185148,-0.090852,0.252796,0.185271,-0.045358,0.252790,-0.090855},{-0.039352,0.193587,-0.091794,0.260772,0.193710,-0.039385,0.260767,-0.091798},{-0.022569,0.201805,-0.087586,0.263479,0.201855,-0.022506,0.263475,-0.087590},{-0.016251,0.210644,-0.088266,0.271209,0.210694,-0.016188,0.271204,-0.088270},{-0.011708,0.216854,-0.089569,0.283430,0.216898,-0.011643,0.283423,-0.089571},{-0.005344,0.225684,-0.090200,0.291344,0.225728,-0.005278,0.291337,-0.090202},{-0.000800,0.231340,-0.091280,0.303482,0.231380,-0.000731,0.303475,-0.091283},{0.005557,0.240092,-0.091854,0.311564,0.240132,0.005626,0.311558,-0.091857},{0.010377,0.244984,-0.092867,0.323834,0.245020,0.010450,0.323819,-0.092860},{0.016667,0.253583,-0.093529,0.332134,0.253618,0.016741,0.332119,-0.093521},{0.028396,0.260432,-0.055368,0.322287,0.260464,0.028478,0.322282,-0.055369},{0.034692,0.268951,-0.054215,0.330067,0.268983,0.034775,0.330062,-0.054217},{0.051563,0.288309,-0.007405,0.313460,0.288722,0.050959,0.313465,-0.007407},{0.058216,0.297251,-0.004091,0.320445,0.297664,0.057613,0.320449,-0.004093},{0.073706,0.318013,0.024795,0.314792,0.318040,0.073589,0.314789,0.024802},{0.080374,0.326902,0.029286,0.321265,0.326929,0.080257,0.321261,0.029293},{0.159600,0.473258,0.053850,0.343367,0.473664,0.158948,0.343406,0.053831},{0.121065,0.418005,-0.024336,0.232748,0.418582,0.119302,0.231799,-0.021722},{0.156634,0.463694,0.002719,0.268527,0.464272,0.154869,0.267579,0.005335},{0.165239,0.420077,-0.003466,0.208168,0.420097,0.165267,0.208232,-0.003614},{0.190299,0.451777,0.017005,0.236600,0.451796,0.190326,0.236665,0.016858},{0.215518,0.487498,0.012267,0.239222,0.486576,0.216575,0.239198,0.012340},{0.236354,0.513047,0.028472,0.263551,0.512125,0.237412,0.263527,0.028545},{0.244442,0.522227,0.050103,0.298594,0.518833,0.249571,0.297590,0.050769},{0.257791,0.536111,0.066559,0.323422,0.532716,0.262920,0.322417,0.067225},{0.259154,0.519092,0.087612,0.353162,0.522449,0.252375,0.354125,0.087918},{0.265010,0.521325,0.103967,0.376644,0.524683,0.258232,0.377606,0.104273},{0.251124,0.491897,0.118158,0.400010,0.493431,0.248009,0.398054,0.121386},{0.251584,0.485947,0.133339,0.419533,0.487480,0.248470,0.417576,0.136567},{0.243837,0.444897,0.146005,0.428523,0.444418,0.243359,0.427073,0.148280},{0.241470,0.434955,0.158754,0.441976,0.434476,0.240992,0.440527,0.161030},{0.238748,0.384860,0.164354,0.439259,0.385687,0.239614,0.437359,0.165645},{0.235294,0.373841,0.173646,0.445695,0.374668,0.236160,0.443795,0.174938},{0.225104,0.334526,0.199978,0.410885,0.335728,0.226525,0.410201,0.199212},{0.221467,0.323857,0.205965,0.411238,0.325059,0.222888,0.410553,0.205198},{0.208875,0.293727,0.217714,0.367306,0.295550,0.211448,0.366350,0.216407},{0.205638,0.284369,0.220097,0.362694,0.286193,0.208212,0.361739,0.218791},{0.229195,0.286165,0.233471,0.355071,0.167994,0.047974,0.425222,0.341365},{-0.113126,0.028119,0.308663,0.393675,0.028133,-0.113133,0.393661,0.308642},{-0.126352,0.012499,0.312958,0.392105,0.012514,-0.126358,0.392090,0.312937},{-0.070284,0.055419,0.258976,0.331802,0.055427,-0.070294,0.331802,0.258979},{-0.078550,0.044887,0.260474,0.327975,0.044895,-0.078559,0.327975,0.260477},{-0.069111,0.040799,0.249083,0.305245,0.040803,-0.069117,0.305248,0.249091},{-0.076176,0.031363,0.249793,0.300836,0.031368,-0.076182,0.300838,0.249802},{-0.061407,0.024460,0.239292,0.282814,0.024467,-0.061414,0.282819,0.239306},{-0.067199,0.015838,0.239477,0.278145,0.015845,-0.067205,0.278149,0.239491},{-0.052374,0.010181,0.229158,0.263334,0.010181,-0.052376,0.263340,0.229175},{-0.057077,0.002346,0.228965,0.258598,0.002347,-0.057079,0.258603,0.228981},{-0.029125,-0.019282,0.226648,0.249760,-0.019282,-0.029124,0.249761,0.226663},{-0.032363,-0.027126,0.226365,0.245166,-0.027126,-0.032364,0.245167,0.226380},{-0.003024,-0.060873,0.228003,0.239093,-0.060856,-0.003035,0.239089,0.228011},{-0.004925,-0.069480,0.227788,0.234718,-0.069463,-0.004937,0.234713,0.227796},{-0.002609,-0.080276,0.216922,0.224382,-0.080272,-0.002614,0.224386,0.216949},{-0.004387,-0.088750,0.216549,0.220129,-0.088746,-0.004393,0.220132,0.216576},{-0.005895,-0.094779,0.202647,0.210009,-0.094762,-0.005899,0.209994,0.202617},{-0.007696,-0.102958,0.202113,0.205903,-0.102941,-0.007699,0.205888,0.202083},{-0.008840,-0.109527,0.187863,0.196823,-0.109568,-0.008872,0.196898,0.188109},{-0.010597,-0.117375,0.187306,0.192942,-0.117417,-0.010630,0.193017,0.187552},{-0.017431,-0.158332,0.063863,0.147512,-0.158122,-0.017140,0.147939,0.062178}};
// float times[TIMESTEPS] = {0.000000,0.006909,0.013818,0.020727,0.027637,0.034546,0.041455,0.048364,0.055273,0.062182,0.069092,0.076001,0.082910,0.089819,0.096728,0.103637,0.110547,0.117456,0.124365,0.131274,0.138183,0.138183,0.138756,0.139328,0.139901,0.140473,0.141046,0.141618,0.142190,0.142763,0.143335,0.143908,0.144480,0.145053,0.145625,0.146198,0.146770,0.147343,0.147915,0.148488,0.149060,0.149633,0.149633,0.151541,0.153448,0.155356,0.157264,0.159172,0.161080,0.162988,0.164896,0.166803,0.168711,0.170619,0.172527,0.174435,0.176343,0.178251,0.180158,0.182066,0.183974,0.185882,0.187790,0.187790,0.188766,0.189743,0.190720,0.191697,0.192673,0.193650,0.194627,0.195603,0.196580,0.197557,0.198533,0.199510,0.200487,0.201463,0.202440,0.203417,0.204393,0.205370,0.206347,0.207324};

class TrajBound : public ReorientableBehavior
{
public:
	Interpolator interp;

	TBMode mode = TB_SIT; //Current state within state-machine

	uint32_t tLast; //int used to store system time at various events

	float extDes; //The desired leg extension
	float angDes; // The desired leg angle
	float t;
	float test1;
	float test2;

	bool boolSlow = false;

	float posDes[MOTORS];
	float velDes[MOTORS];
	float uDes[MOTORS];
	float df[MOTORS];
	float dfDes[MOTORS];
	float posAct;
	float velAct;
	float kp = 0.8;
	float kd = 0.025; // 0.02
	float kpy = 0.1;	//0.1;
	float kdy = 0;		//0.05;
	float kiy = 0.02;
	float V = 15;
	float R = 0.23;
	float kt = 0.0954;
	float yawErrorInt = 0;

	float yawInit;
	float yawDes;
	float turnLeft;

	float finalTime = times[TIMESTEPS - 1];

	// Parser state (for serial comms with raspi)
	// Goes from 0 to 1 to 2
	int numAlignmentSeen = 0;
	uint16_t rxPtr = 0;

	// Receive buffer and alignment
	const static uint16_t RX_BUF_SIZE = 100;
	SerialCommandPacket packet;

	//sig is mapped from remote; here, 3 corresponds to pushing the left stick to the right
	// which in turn forces the state machine into FH_LEAP
	void signal(uint32_t sig)
	{
		if (sig > 1)
		{
			// tLast = S->millis;
			ioctl(LOGGER_FILENO, 1);//start
		} else {
			ioctl(LOGGER_FILENO, 0);//stop
		}
	}

	void begin()
	{
		mode = TB_STAND;	 // Start behavior in STAND mode
		tLast = S->millis; // Record the system time @ this transition
		yawInit = S->imu.euler.z;
		yawErrorInt = 0;
		ioctl(LOGGER_FILENO, 0);//stop
	}

	void update()
	{
		// Serial comms code

		// Character to store the latest received character
		uint8_t latestRX;

		// Loop through while there are new bytes available
		while (read(SERIAL_AUX_FILENO, &latestRX, 1) > 0)
		{
			if (numAlignmentSeen == 0 && latestRX == ALIGNMENT_WORD[0])
			{
				numAlignmentSeen = 1;
			}
			else if (numAlignmentSeen == 1 && latestRX == ALIGNMENT_WORD[1])
			{
				numAlignmentSeen = 2;
				rxPtr = 0;
			}
			else if (numAlignmentSeen == 2)
			{
				// Add the next byte to our memory space in serial_packet
				uint8_t *pSerialPacket = (uint8_t *)&packet;
				pSerialPacket[rxPtr++] = latestRX; // post-increment rxPtr

				// Check if we have read a whole packet
				if (rxPtr == sizeof(SerialCommandPacket))
				{
					// Copy voltage and current readings
					voltage = packet.voltage;
					current = packet.current;

					// Reset
					numAlignmentSeen = rxPtr = 0;
				}
			}
		}

		if (isReorienting())
			return;

		for (int j = 0; j < MOTORS; j++)
		{
			posDes[j] = 0;
			velDes[j] = 0;
			uDes[j] = 0;
			df[j] = 0;
		}

		if (mode == TB_SIT)
		{
			C->mode = RobotCommand_Mode_LIMB;
			for (int i = 0; i < P->limbs_count; ++i)
			{
				P->limbs[i].type = LimbParams_Type_SYMM5BAR_EXT_M;
				// Splay angle for the front/rear legs (outward splay due to fore-displacement of front legs
				// and aft-displacement of rear legs)
				// The pitch angle (S->imu.euler.y) is subtracted since we want to the set the *absolute* leg angle
				// and limb[i].setPosition(ANGLE, *) will set the angle of the leg *relative* to the robot body
				angDes = (isFront(i)) ? -S->imu.euler.y - 0.1 : -S->imu.euler.y + 0.2;
				limb[i].setGain(ANGLE, 0.8, .03);
				limb[i].setPosition(ANGLE, angDes);

				limb[i].setGain(EXTENSION, 120, 3);
				// Set the leg extension to 0.14 m
				limb[i].setPosition(EXTENSION, 0.12);
			}
		}
		else if (mode == TB_STAND)
		{
			C->mode = RobotCommand_Mode_JOINT;

			t = 0.00001 * (100 * (S->millis - tLast) % (int)(100000 * finalTime));

			int index = 0;
			for (int j = 0; j < TIMESTEPS; j++)
			{
				if (times[j] <= t && t < times[j + 1])
				{
					index = j;
				}
			}

			interp.getMultipleCubicSplineInterp(pos, vel, times, t, posDes);
			interp.getMultipleLinearInterp(vel, times, t, velDes);
			interp.getMultipleZOH(u, times, t, uDes);
			interp.getMultipleZOH(dfVec, times, t, dfDes);

			for (int i = 0; i < MOTORS; ++i)
			{
				joint[i].setGain(0.8);

				yawDes = yawInit + 0;
				yawErrorInt = yawErrorInt + 0.001 * (yawDes - S->imu.euler.z);
				// turnLeft = kpy*(yawDes - S->imu.euler.z) + kdy*(-S->imu.angular_velocity.z) + 0.1;
				turnLeft = -map(C->behavior.twist.angular.z, -1.0, 1.0, -0.1, 0.1) - 0.03;

				if (i == 0 || i == 2 || i == 4 || i == 6)
				{
					posDes[i] = posDes[i] - turnLeft;
				}
				else if (i == 1 || i == 3 || i == 5 || i == 7)
				{
					posDes[i] = posDes[i] + turnLeft;
				}

				// if(i==1 || i==3 || i==4 || i==6)
				// {
				// 	posDes[i] = posDes[i] - S->imu.euler.y;
				// } else if(i==0 || i==2 || i==5 || i==7)
				// {
				// 	posDes[i] = posDes[i] + S->imu.euler.y;
				// }

				posAct = joint[i].getPosition();
				velAct = joint[i].getVelocity();

				// df[i] = 1 / (0.95 * V) * (uDes[i] * R / kt + kt * joint[i].getVelocity());
				joint[i].setOpenLoop(dfDes[i] + kp * (posDes[i] - posAct) + kd * (velDes[i] - velAct));
			}
		}
	}

	bool running()
	{
		return false;
	}
	void end()
	{
		mode = TB_SIT;
	}
};

TrajBound trajBound;

void debug()
{
	// printf("loop: ");
	// printf("%d, ", trajBound.mode);
	// printf("pos command: %4.3f, %4.3f, %4.3f, %4.3f, %4.3f, %4.3f, %4.3f, %4.3f. ",
	// 	trajBound.uDes[0],trajBound.uDes[1],trajBound.uDes[2],trajBound.uDes[3],trajBound.uDes[4],trajBound.uDes[5],trajBound.uDes[6],trajBound.uDes[7]);
	// printf("Time: %4.3fs. ", trajBound.t);
	// printf("%4.3f, %4.3f, %4.3f ", trajBound.yawInit, trajBound.turnLeft, trajBound.kiy * trajBound.yawErrorInt);
	// printf("test1, test2: %4.3f, %4.3f.", trajBound.test1,trajBound.test2);
	// printf("Voltage: %6.3f, Current: %6.3f", voltage,  current);

	// printf("\n");

	myData_buf[0] = voltage;
	myData_buf[1] = current;
	write(LOGGER_FILENO, myData, 32);
}

int main(int argc, char *argv[])
{
#if defined(ROBOT_MINITAUR)
	init(RobotParams_Type_MINITAUR, argc, argv);
	for (int i = 0; i < P->joints_count; ++i)
		P->joints[i].zero = motZeros[i]; //Add motor zeros from array at beginning of file
#elif defined(ROBOT_MINITAUR_E)
	init(RobotParams_Type_MINITAUR_E, argc, argv);
	JoyType joyType = JoyType_FRSKY_XSR;
	ioctl(JOYSTICK_FILENO, IOCTL_CMD_JOYSTICK_SET_TYPE, &joyType);
#else
#error "Define robot type in preprocessor"
#endif

	// Uncomment to clear Bound and Walk behaviors
	// behaviors.clear();

	behaviors.push_back(&trajBound);
	if (!trajBound.boolSlow)
	{
		for (int i = 0; i < TIMESTEPS; ++i)
		{
			times[i] = 1 * times[i];
		}
		trajBound.boolSlow = true;
	}

	// Change serial port baud speed. 115200, 8N1 is the default already, but this demonstrates how to change to other settings
	SerialPortConfig cfg;
	cfg.baud = 115200;
	// cfg.baud = 230400;
	cfg.mode = SERIAL_8N1;
	ioctl(SERIAL_AUX_FILENO, IOCTL_CMD_SERIAL_PORT_CFG, &cfg);

	setDebugRate(100);

	// SerialPortConfig cfg;
	// cfg.baud = 115200;
	// cfg.mode = SERIAL_8N1;
	// ioctl(STDOUT_FILENO, IOCTL_CMD_SERIAL_PORT_CFG, &cfg);

	// Run
	return begin();
}
